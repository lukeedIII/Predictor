[{"filePath":"F:\\Predictor\\desktop\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[848,851],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[848,851],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\r\nimport { HashRouter, Routes, Route, NavLink, useLocation } from 'react-router-dom';\r\nimport { connectLiveWS, useLivePrice, useLiveConnected, useLiveChangePct } from './stores/liveStore';\r\nimport { Toaster } from './stores/toastStore';\r\nimport { IconDashboard, IconChart, IconBot, IconSettings, IconMinimize, IconMaximize, IconClose, IconNexus, IconKeyboard, IconGpu } from './components/Icons';\r\n\r\n/* Lazy pages */\r\nimport Dashboard from './pages/Dashboard';\r\nimport PaperTrading from './pages/PaperTrading';\r\nimport NexusAgent from './pages/NexusAgent';\r\nimport Settings from './pages/Settings';\r\nimport GpuFarm from './pages/GpuFarm';\r\nimport FirstRunSetup from './pages/FirstRunSetup';\r\n\r\n/* ÔöÇÔöÇÔöÇ Titlebar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction Titlebar() {\r\n    const api = (window as any).electronAPI;\r\n    return (\r\n        <header className=\"titlebar\">\r\n            <div className=\"titlebar-brand\">\r\n                <IconNexus style={{ width: 16, height: 16 }} />\r\n                <span>Nexus Shadow-Quant</span>\r\n            </div>\r\n            <div className=\"titlebar-controls\">\r\n                <button className=\"titlebar-btn\" onClick={() => api?.minimize()} aria-label=\"Minimize\">\r\n                    <IconMinimize style={{ width: 14, height: 14 }} />\r\n                </button>\r\n                <button className=\"titlebar-btn\" onClick={() => api?.maximize()} aria-label=\"Maximize\">\r\n                    <IconMaximize style={{ width: 14, height: 14 }} />\r\n                </button>\r\n                <button className=\"titlebar-btn close\" onClick={() => api?.close()} aria-label=\"Close\">\r\n                    <IconClose style={{ width: 14, height: 14 }} />\r\n                </button>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ Sidebar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nconst NAV = [\r\n    { to: '/', icon: IconDashboard, label: 'Dashboard' },\r\n    { to: '/trading', icon: IconChart, label: 'Paper Trading' },\r\n    { to: '/gpu-farm', icon: IconGpu, label: 'GPU Farm' },\r\n    { to: '/agent', icon: IconBot, label: 'Nexus Agent' },\r\n    { to: '/settings', icon: IconSettings, label: 'Settings' },\r\n] as const;\r\n\r\nfunction Sidebar({ onToggleShortcuts }: { onToggleShortcuts: () => void }) {\r\n    return (\r\n        <nav className=\"sidebar\">\r\n            <div className=\"sidebar-top\">\r\n                {NAV.map(({ to, icon: Icon, label }) => (\r\n                    <NavLink\r\n                        key={to}\r\n                        to={to}\r\n                        end={to === '/'}\r\n                        className={({ isActive }) => `nav-btn${isActive ? ' active' : ''}`}\r\n                        data-tooltip={label}\r\n                    >\r\n                        <Icon />\r\n                    </NavLink>\r\n                ))}\r\n            </div>\r\n            <div className=\"sidebar-bottom\">\r\n                <button className=\"nav-btn\" data-tooltip=\"Shortcuts\" onClick={onToggleShortcuts}>\r\n                    <IconKeyboard />\r\n                </button>\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ Status Bar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction StatusBar() {\r\n    const price = useLivePrice();\r\n    const changePct = useLiveChangePct();\r\n    const { connected, wsConnected } = useLiveConnected();\r\n    const [clock, setClock] = useState('');\r\n\r\n    useEffect(() => {\r\n        const tick = () => setClock(new Date().toLocaleTimeString('en-US', { hour12: false }));\r\n        tick();\r\n        const id = setInterval(tick, 1000);\r\n        return () => clearInterval(id);\r\n    }, []);\r\n\r\n    const pctClass = (changePct ?? 0) >= 0 ? 'text-positive' : 'text-negative';\r\n\r\n    return (\r\n        <footer className=\"statusbar\">\r\n            <span className=\"flex items-center gap-4\">\r\n                <span className={`status-dot ${connected ? 'online' : 'offline'}`} />\r\n                {connected ? 'Connected' : 'Disconnected'}\r\n            </span>\r\n            {wsConnected && <span className=\"flex items-center gap-4\"><span className=\"status-dot online\" />Binance</span>}\r\n            <div className=\"statusbar-right\">\r\n                {price != null && (\r\n                    <span className=\"mono\">\r\n                        BTC ${price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                        {changePct != null && (\r\n                            <span className={pctClass} style={{ marginLeft: 6 }}>\r\n                                {changePct >= 0 ? '+' : ''}{changePct.toFixed(2)}%\r\n                            </span>\r\n                        )}\r\n                    </span>\r\n                )}\r\n                <span className=\"mono\">{clock}</span>\r\n            </div>\r\n        </footer>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ Shortcuts Overlay ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction ShortcutsOverlay({ show, onClose }: { show: boolean; onClose: () => void }) {\r\n    if (!show) return null;\r\n    const shortcuts = [\r\n        ['Navigate Dashboard', '1'],\r\n        ['Navigate Paper Trading', '2'],\r\n        ['Navigate Nexus Agent', '3'],\r\n        ['Navigate Settings', '4'],\r\n        ['Show Shortcuts', '?'],\r\n    ];\r\n    return (\r\n        <div className=\"overlay-backdrop\" onClick={onClose}>\r\n            <div className=\"overlay-panel\" onClick={e => e.stopPropagation()}>\r\n                <h2>Keyboard Shortcuts</h2>\r\n                {shortcuts.map(([label, key]) => (\r\n                    <div className=\"shortcut-row\" key={key}>\r\n                        <span>{label}</span>\r\n                        <kbd>{key}</kbd>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ Route Content ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction PageContent() {\r\n    const location = useLocation();\r\n    return (\r\n        <main className=\"page\" key={location.pathname}>\r\n            <Routes>\r\n                <Route path=\"/\" element={<Dashboard />} />\r\n                <Route path=\"/trading\" element={<PaperTrading />} />\r\n                <Route path=\"/gpu-farm\" element={<GpuFarm />} />\r\n                <Route path=\"/agent\" element={<NexusAgent />} />\r\n                <Route path=\"/settings\" element={<Settings />} />\r\n            </Routes>\r\n        </main>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ Inner Shell (must be inside Router for hooks) ÔöÇÔöÇÔöÇ */\r\nfunction AppShell({ showShortcuts, setShowShortcuts }: { showShortcuts: boolean; setShowShortcuts: React.Dispatch<React.SetStateAction<boolean>> }) {\r\n    return (\r\n        <>\r\n            <div className=\"app-layout\">\r\n                <Titlebar />\r\n                <Sidebar onToggleShortcuts={() => setShowShortcuts(s => !s)} />\r\n                <PageContent />\r\n                <StatusBar />\r\n            </div>\r\n            <ShortcutsOverlay show={showShortcuts} onClose={() => setShowShortcuts(false)} />\r\n            <Toaster />\r\n        </>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇÔöÇ App ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nexport default function App() {\r\n    const [showShortcuts, setShowShortcuts] = useState(false);\r\n    const [firstRunDone, setFirstRunDone] = useState<boolean | null>(null);\r\n\r\n    // Connect WS once at mount\r\n    useEffect(() => {\r\n        const cleanup = connectLiveWS();\r\n        return cleanup;\r\n    }, []);\r\n\r\n    // Check first-run\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const res = await fetch('http://127.0.0.1:8420/api/settings');\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setFirstRunDone(data?.first_run_done === true);\r\n                } else {\r\n                    setFirstRunDone(true); // assume done if API is down\r\n                }\r\n            } catch {\r\n                setFirstRunDone(true);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    // Still loading first-run check\r\n    if (firstRunDone === null) return null;\r\n\r\n    // Show first-run wizard\r\n    if (!firstRunDone) {\r\n        return <FirstRunSetup onComplete={() => setFirstRunDone(true)} />;\r\n    }\r\n\r\n    return (\r\n        <HashRouter>\r\n            <AppShell showShortcuts={showShortcuts} setShowShortcuts={setShowShortcuts} />\r\n        </HashRouter>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\HardwareMonitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\Icons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\MetricCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\ModelRegistry.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\NewsFeed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\PaperStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\QuantPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":131,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":131,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5813,5816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5813,5816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback } from 'react';\r\nimport { useLiveQuant } from '../stores/liveStore';\r\nimport { IconActivity } from './Icons';\r\n\r\n/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n   Quant Intelligence Panel ÔÇö Premium Multi-Model Dashboard\r\n   Surfaces all 16 institutional-grade quant models to the UI.\r\n   ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */\r\n\r\n// ÔöÇÔöÇ Helpers ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n\r\ntype GaugeProps = {\r\n    label: string; value: number; min?: number; max?: number;\r\n    fmt?: (v: number) => string; color?: string; compact?: boolean;\r\n};\r\n\r\nfunction MiniGauge({ label, value, min = 0, max = 1, fmt, color, compact }: GaugeProps) {\r\n    const pct = Math.min(100, Math.max(0, ((value - min) / (max - min)) * 100));\r\n    const display = fmt ? fmt(value) : value.toFixed(2);\r\n    return (\r\n        <div style={{ marginBottom: compact ? 5 : 8 }}>\r\n            <div className=\"flex justify-between items-center\" style={{ marginBottom: 2 }}>\r\n                <span style={{ fontSize: 10.5, color: 'var(--text-1)' }}>{label}</span>\r\n                <span className=\"mono\" style={{ fontSize: 10.5, color: color ?? 'var(--text-0)' }}>{display}</span>\r\n            </div>\r\n            <div className=\"progress-track\" style={{ height: compact ? 3 : 4 }}>\r\n                <div className=\"progress-fill\" style={{ width: `${pct}%`, background: color ?? 'var(--accent)' }} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SectionHeader({ title, open, toggle, badge, badgeColor }: {\r\n    title: string; open: boolean; toggle: () => void; badge?: string; badgeColor?: string;\r\n}) {\r\n    return (\r\n        <button\r\n            onClick={toggle}\r\n            className=\"flex justify-between items-center\"\r\n            style={{\r\n                width: '100%', background: 'none', border: 'none', cursor: 'pointer',\r\n                padding: '6px 0', color: 'var(--text-0)', fontSize: 11, fontWeight: 600,\r\n                letterSpacing: '0.02em',\r\n            }}\r\n        >\r\n            <span className=\"flex items-center gap-6\">\r\n                <span style={{\r\n                    display: 'inline-block', width: 14, textAlign: 'center',\r\n                    color: 'var(--text-2)', transition: 'transform 150ms var(--ease)',\r\n                    transform: open ? 'rotate(90deg)' : 'rotate(0deg)', fontSize: 10,\r\n                }}>ÔûÂ</span>\r\n                {title}\r\n            </span>\r\n            {badge && (\r\n                <span className=\"badge\" style={{\r\n                    background: `${badgeColor ?? 'var(--accent)'}18`,\r\n                    color: badgeColor ?? 'var(--accent)',\r\n                    fontSize: 9, padding: '1px 6px',\r\n                }}>{badge}</span>\r\n            )}\r\n        </button>\r\n    );\r\n}\r\n\r\nfunction Section({ title, open, toggle, badge, badgeColor, children }: {\r\n    title: string; open: boolean; toggle: () => void;\r\n    badge?: string; badgeColor?: string; children: React.ReactNode;\r\n}) {\r\n    return (\r\n        <div style={{ borderBottom: '1px solid var(--border)', paddingBottom: open ? 6 : 0 }}>\r\n            <SectionHeader title={title} open={open} toggle={toggle} badge={badge} badgeColor={badgeColor} />\r\n            <div style={{\r\n                maxHeight: open ? 500 : 0, overflow: 'hidden',\r\n                transition: 'max-height 250ms var(--ease), opacity 200ms var(--ease)',\r\n                opacity: open ? 1 : 0, paddingTop: open ? 4 : 0,\r\n            }}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/** 3-segment probability bar for HMM regime states */\r\nfunction RegimeBar({ probs }: { probs: number[] }) {\r\n    const labels = ['BULL', 'SIDE', 'BEAR'];\r\n    const colors = ['var(--positive)', 'var(--accent)', 'var(--negative)'];\r\n    const total = probs.reduce((a, b) => a + b, 0) || 1;\r\n    return (\r\n        <div style={{ marginTop: 4, marginBottom: 6 }}>\r\n            <div className=\"flex\" style={{ height: 6, borderRadius: 3, overflow: 'hidden', gap: 1 }}>\r\n                {probs.map((p, i) => (\r\n                    <div key={i} style={{\r\n                        width: `${(p / total) * 100}%`, background: colors[i],\r\n                        minWidth: 2, transition: 'width 300ms var(--ease)',\r\n                    }} />\r\n                ))}\r\n            </div>\r\n            <div className=\"flex justify-between\" style={{ marginTop: 3 }}>\r\n                {probs.map((p, i) => (\r\n                    <span key={i} className=\"mono\" style={{ fontSize: 9, color: colors[i] }}>\r\n                        {labels[i]} {(p * 100).toFixed(0)}%\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SignalBadge({ signal }: { signal: { type: string; action: string; reason: string } }) {\r\n    const colorMap: Record<string, string> = {\r\n        REGIME: 'var(--accent)', OFI: '#A78BFA', VOL: 'var(--warning)',\r\n        HESTON: 'var(--negative)', JUMP: '#F43F5E', MFDFA: '#06B6D4',\r\n        RQA: '#8B5CF6', BVD: 'var(--positive)', OB_WALL: 'var(--warning)',\r\n    };\r\n    const c = colorMap[signal.type] ?? 'var(--text-1)';\r\n    return (\r\n        <div className=\"flex items-center gap-6\" style={{ marginBottom: 4 }}>\r\n            <span style={{\r\n                fontSize: 8.5, fontWeight: 700, borderRadius: 3,\r\n                padding: '1px 5px', background: `${c}20`, color: c,\r\n                fontFamily: 'var(--font-mono)', letterSpacing: '0.05em',\r\n            }}>{signal.type}</span>\r\n            <span style={{ fontSize: 10, color: 'var(--text-1)' }}>{signal.reason}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\n// ÔöÇÔöÇ Main Component ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n\r\nexport default function QuantPanel() {\r\n    const quant = useLiveQuant() as Record<string, any> | null;\r\n\r\n    // Section open/close state ÔÇö default: regime + basics open\r\n    const [sections, setSections] = useState<Record<string, boolean>>({\r\n        regime: true, volatility: false, orderflow: false, orderbook: true, jumps: false,\r\n        cycles: false, wavelets: false, fractals: false, rqa: false,\r\n        signals: true,\r\n    });\r\n    const toggle = useCallback((key: string) =>\r\n        setSections(s => ({ ...s, [key]: !s[key] }))\r\n        , []);\r\n\r\n    // ÔöÇÔöÇ Awaiting data state ÔöÇÔöÇ\r\n    if (!quant) {\r\n        return (\r\n            <div className=\"card animate-in\">\r\n                <div className=\"card-header\">\r\n                    <span className=\"card-title\">Quant Intelligence</span>\r\n                    <IconActivity style={{ width: 14, height: 14, color: 'var(--text-2)' }} />\r\n                </div>\r\n                <div className=\"empty-state\" style={{ padding: 20 }}>\r\n                    <span style={{ fontSize: 12 }}>Awaiting dataÔÇª</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // ÔöÇÔöÇ Extract sections (supports both old raw format and new ui_summary) ÔöÇÔöÇ\r\n    const regime = quant.regime ?? {};\r\n    const regimeLabel = regime.label ?? regime.regime ?? 'UNKNOWN';\r\n    const regimeConf = regime.confidence ?? 0;\r\n    const regimeProbs = regime.probabilities ?? [0.33, 0.34, 0.33];\r\n\r\n    const vol = quant.volatility ?? {};\r\n    const garchForecast = vol.garch_forecast ?? vol.forecast ?? 0;\r\n    const garchAsymmetry = vol.garch_asymmetry ?? vol.asymmetry ?? 0;\r\n    const garchCurrent = vol.garch_current ?? vol.current ?? 0;\r\n    const hestonLeverage = vol.heston_leverage ?? -0.7;\r\n    const roughH = vol.rough_H ?? 0.5;\r\n    const roughInterpretation = vol.rough_interpretation ?? 'UNKNOWN';\r\n    const roughScore = vol.rough_score ?? 50;\r\n\r\n    const of = quant.order_flow ?? {};\r\n    const ofiSignal = of.signal ?? 'NEUTRAL';\r\n    const ofiStrength = of.strength ?? 'WEAK';\r\n    const ofiNormalized = of.normalized ?? 0;\r\n\r\n    const jumps = quant.jumps ?? {};\r\n    const jumpDetected = jumps.detected ?? false;\r\n    const jumpProb = jumps.probability ?? 0;\r\n    const jumpDirection = jumps.direction ?? 'NONE';\r\n    const jumpRisk = jumps.risk_level ?? 'UNKNOWN';\r\n    const batesStatus = jumps.bates_status ?? 'N/A';\r\n\r\n    const cycles = quant.cycles ?? {};\r\n    const cycleStrengths = cycles.strengths ?? [0, 0, 0];\r\n    const hhtPeriod = cycles.hht_period_minutes ?? 0;\r\n\r\n    const wav = quant.wavelets ?? {};\r\n    const trendStrength = wav.trend_strength ?? 0.5;\r\n\r\n    const fractal = quant.fractals ?? {};\r\n    const mfDeltaH = fractal.multifractal_delta_h ?? 0;\r\n    const mfInterp = fractal.multifractal_interpretation ?? 'UNKNOWN';\r\n    const tdaComplexity = fractal.tda_complexity ?? 'UNKNOWN';\r\n    const tdaPersistence = fractal.tda_persistence ?? 0;\r\n\r\n    const rqa = quant.rqa ?? {};\r\n    const rqaDet = rqa.determinism ?? 0;\r\n    const rqaRR = rqa.recurrence_rate ?? 0;\r\n    const rqaInterp = rqa.interpretation ?? 'UNKNOWN';\r\n\r\n    const ob = quant.order_book ?? {};\r\n    const bvdRatio = ob.bvd_ratio ?? 1.0;\r\n    const wallBids = ob.wall_bids ?? 0;\r\n    const wallAsks = ob.wall_asks ?? 0;\r\n\r\n    const signals: Array<{ type: string; action: string; reason: string }> = quant.signals ?? [];\r\n\r\n    const basics = quant.basics ?? {};\r\n    const momentum = basics.momentum ?? quant.momentum ?? 0;\r\n    const rsi = basics.rsi ?? quant.rsi ?? 50;\r\n    const vwapDist = basics.vwap_dist ?? quant.vwap_dist ?? 0;\r\n    const sharpe = basics.sharpe ?? quant.sharpe ?? 0;\r\n\r\n    // ÔöÇÔöÇ Colors ÔöÇÔöÇ\r\n    const regimeColor = regimeLabel === 'BULL' ? 'var(--positive)'\r\n        : regimeLabel === 'BEAR' ? 'var(--negative)' : 'var(--accent)';\r\n    const ofiColor = ofiSignal === 'BUY_PRESSURE' ? 'var(--positive)'\r\n        : ofiSignal === 'SELL_PRESSURE' ? 'var(--negative)' : 'var(--text-2)';\r\n\r\n    return (\r\n        <div className=\"card animate-in\">\r\n            {/* ÔöÇÔöÇ Header ÔöÇÔöÇ */}\r\n            <div className=\"card-header\">\r\n                <span className=\"card-title\">Quant Intelligence</span>\r\n                <div className=\"flex items-center gap-6\">\r\n                    {signals.length > 0 && (\r\n                        <span className=\"badge\" style={{\r\n                            background: 'var(--warning-dim)', color: 'var(--warning)',\r\n                            fontSize: 9, padding: '1px 6px',\r\n                        }}>{signals.length} signal{signals.length > 1 ? 's' : ''}</span>\r\n                    )}\r\n                    <span className=\"badge\" style={{ background: `${regimeColor}20`, color: regimeColor }}>\r\n                        {regimeLabel}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇ Quick Metrics Strip ÔöÇÔöÇ */}\r\n            <div className=\"flex gap-8\" style={{ marginBottom: 8 }}>\r\n                {[\r\n                    { label: 'RSI', value: rsi.toFixed(0), color: rsi > 70 ? 'var(--negative)' : rsi < 30 ? 'var(--positive)' : 'var(--text-1)' },\r\n                    { label: 'Mom', value: momentum.toFixed(3), color: momentum >= 0 ? 'var(--positive)' : 'var(--negative)' },\r\n                    { label: 'Sharpe', value: sharpe.toFixed(2), color: sharpe > 0 ? 'var(--positive)' : 'var(--negative)' },\r\n                    { label: 'VWAP', value: `${(vwapDist * 100).toFixed(2)}%`, color: 'var(--accent)' },\r\n                ].map((m, i) => (\r\n                    <div key={i} style={{\r\n                        flex: 1, textAlign: 'center', padding: '4px 0',\r\n                        borderRadius: 'var(--radius-sm)', background: 'var(--bg-3)',\r\n                    }}>\r\n                        <div className=\"mono\" style={{ fontSize: 11, fontWeight: 600, color: m.color }}>{m.value}</div>\r\n                        <div style={{ fontSize: 8.5, color: 'var(--text-2)', marginTop: 1 }}>{m.label}</div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇ Market Regime ÔöÇÔöÇ */}\r\n            <Section title=\"Market Regime (HMM)\" open={sections.regime} toggle={() => toggle('regime')}\r\n                badge={`${regimeConf.toFixed(0)}%`} badgeColor={regimeColor}>\r\n                <RegimeBar probs={regimeProbs} />\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Volatility Suite ÔöÇÔöÇ */}\r\n            <Section title=\"Volatility Suite\" open={sections.volatility} toggle={() => toggle('volatility')}\r\n                badge={`${((garchCurrent || garchForecast) * 100).toFixed(2)}%`} badgeColor=\"var(--warning)\">\r\n                <MiniGauge label=\"GARCH Forecast\" value={garchForecast} max={0.1}\r\n                    fmt={v => `${(v * 100).toFixed(2)}%`} color=\"var(--warning)\" compact />\r\n                <MiniGauge label=\"Leverage (╬│)\" value={garchAsymmetry} max={0.5}\r\n                    fmt={v => v.toFixed(4)} color=\"var(--warning)\" compact />\r\n                <MiniGauge label=\"Heston Leverage\" value={Math.abs(hestonLeverage)} max={1}\r\n                    fmt={() => `¤ü = ${hestonLeverage.toFixed(2)}`} color=\"var(--negative)\" compact />\r\n                <MiniGauge label=\"Roughness (H)\" value={roughH} max={1}\r\n                    fmt={v => `${v.toFixed(3)} (${roughInterpretation})`}\r\n                    color={roughH < 0.3 ? '#06B6D4' : roughH > 0.5 ? 'var(--accent)' : 'var(--text-1)'} compact />\r\n                <div className=\"flex justify-between\" style={{ fontSize: 9.5, color: 'var(--text-2)', marginTop: 2 }}>\r\n                    <span>Roughness Score</span>\r\n                    <span className=\"mono\" style={{ color: 'var(--text-1)' }}>{roughScore.toFixed(0)}/100</span>\r\n                </div>\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Order Flow ÔöÇÔöÇ */}\r\n            <Section title=\"Order Flow (OFI)\" open={sections.orderflow} toggle={() => toggle('orderflow')}\r\n                badge={ofiSignal.replace('_', ' ')} badgeColor={ofiColor}>\r\n                <div className=\"flex justify-between items-center\" style={{ marginBottom: 6 }}>\r\n                    <span style={{ fontSize: 10.5, color: 'var(--text-1)' }}>Pressure</span>\r\n                    <span className=\"mono\" style={{ fontSize: 11, color: ofiColor, fontWeight: 600 }}>\r\n                        {ofiSignal.replace('_', ' ')} ┬À {ofiStrength}\r\n                    </span>\r\n                </div>\r\n                <MiniGauge label=\"OFI Normalized\" value={(ofiNormalized + 1) / 2} max={1}\r\n                    fmt={() => ofiNormalized.toFixed(3)}\r\n                    color={ofiNormalized > 0.2 ? 'var(--positive)' : ofiNormalized < -0.2 ? 'var(--negative)' : 'var(--text-2)'}\r\n                    compact />\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ L2 Order Book ÔöÇÔöÇ */}\r\n            <Section title=\"L2 Order Book (Depth)\" open={sections.orderbook} toggle={() => toggle('orderbook')}\r\n                badge={`BVD ${bvdRatio.toFixed(2)}x`} badgeColor={bvdRatio > 1.5 ? 'var(--positive)' : bvdRatio < 0.66 ? 'var(--negative)' : 'var(--accent)'}>\r\n                <MiniGauge label=\"Buy Volume Delta (BVD)\" value={bvdRatio} max={5}\r\n                    fmt={v => `${v.toFixed(2)}x`}\r\n                    color={bvdRatio > 1.5 ? 'var(--positive)' : bvdRatio < 0.66 ? 'var(--negative)' : 'var(--text-2)'}\r\n                    compact />\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginTop: 4 }}>\r\n                    <span>Bid Wall ({'>'}15 BTC)</span>\r\n                    <span className=\"mono\" style={{ color: wallBids > 15 ? 'var(--positive)' : 'var(--text-1)' }}>{wallBids.toFixed(1)} Ôé┐</span>\r\n                </div>\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginTop: 2 }}>\r\n                    <span>Ask Wall ({'>'}15 BTC)</span>\r\n                    <span className=\"mono\" style={{ color: wallAsks > 15 ? 'var(--negative)' : 'var(--text-1)' }}>{wallAsks.toFixed(1)} Ôé┐</span>\r\n                </div>\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Jump Detection ÔöÇÔöÇ */}\r\n            <Section title=\"Jump Detection\" open={sections.jumps} toggle={() => toggle('jumps')}\r\n                badge={jumpDetected ? `ÔÜí ${jumpDirection}` : jumpRisk}\r\n                badgeColor={jumpDetected ? 'var(--negative)' : 'var(--text-2)'}>\r\n                {jumpDetected && (\r\n                    <div style={{\r\n                        padding: '6px 10px', borderRadius: 'var(--radius-sm)', marginBottom: 6,\r\n                        background: 'var(--negative-dim)', border: '1px solid rgba(244,63,94,0.25)',\r\n                        animation: 'pulse-glow 2s ease-in-out infinite',\r\n                    }}>\r\n                        <span style={{ fontSize: 11, color: 'var(--negative)', fontWeight: 600 }}>\r\n                            ÔÜí Black Swan Detected ÔÇö {jumpDirection} ({jumpProb.toFixed(0)}% probability)\r\n                        </span>\r\n                    </div>\r\n                )}\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginBottom: 3 }}>\r\n                    <span>Merton Jump Risk</span>\r\n                    <span className=\"mono\" style={{ color: jumpRisk === 'HIGH' ? 'var(--negative)' : 'var(--text-1)' }}>{jumpRisk}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)' }}>\r\n                    <span>Bates SVJ Status</span>\r\n                    <span className=\"mono\">{batesStatus}</span>\r\n                </div>\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Cycle Analysis ÔöÇÔöÇ */}\r\n            <Section title=\"Cycle Analysis (EMD + HHT)\" open={sections.cycles} toggle={() => toggle('cycles')}\r\n                badge={hhtPeriod > 0 ? `${hhtPeriod.toFixed(0)}m` : undefined} badgeColor=\"#06B6D4\">\r\n                {cycleStrengths.every((s: number) => s === 0) ? (\r\n                    <div style={{ fontSize: 10, color: 'var(--text-2)', fontStyle: 'italic', padding: '4px 0' }}>\r\n                        No dominant cycles detected in current window\r\n                    </div>\r\n                ) : cycleStrengths.map((s: number, i: number) => (\r\n                    <MiniGauge key={i} label={`Cycle ${i + 1}`} value={s} max={1}\r\n                        fmt={v => v.toFixed(3)} color=\"#06B6D4\" compact />\r\n                ))}\r\n                {hhtPeriod > 0 && (\r\n                    <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginTop: 2 }}>\r\n                        <span>HHT Dominant Period</span>\r\n                        <span className=\"mono\" style={{ color: '#06B6D4' }}>{hhtPeriod.toFixed(1)} min</span>\r\n                    </div>\r\n                )}\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Wavelet Analysis ÔöÇÔöÇ */}\r\n            <Section title=\"Wavelet Analysis\" open={sections.wavelets} toggle={() => toggle('wavelets')}\r\n                badge={`${(trendStrength * 100).toFixed(0)}%`} badgeColor=\"#A78BFA\">\r\n                <MiniGauge label=\"Trend Strength\" value={trendStrength} max={1}\r\n                    fmt={v => `${(v * 100).toFixed(1)}%`} color=\"#A78BFA\" compact />\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-2)', marginTop: 2 }}>\r\n                    <span>Signal vs Noise</span>\r\n                    <span className=\"mono\" style={{ color: 'var(--text-1)' }}>\r\n                        {trendStrength > 0.6 ? 'Strong Trend' : trendStrength < 0.3 ? 'Noisy' : 'Moderate'}\r\n                    </span>\r\n                </div>\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Fractal Intelligence ÔöÇÔöÇ */}\r\n            <Section title=\"Fractal Intelligence\" open={sections.fractals} toggle={() => toggle('fractals')}\r\n                badge={mfInterp === 'INSUFFICIENT_DATA' ? 'N/A' : mfInterp} badgeColor=\"#EC4899\">\r\n                {mfInterp === 'INSUFFICIENT_DATA' ? (\r\n                    <div style={{ fontSize: 10, color: 'var(--text-2)', fontStyle: 'italic', padding: '4px 0' }}>\r\n                        MF-DFA needs more data for multifractal analysis\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <MiniGauge label=\"Multifractal ╬öH\" value={mfDeltaH} max={1}\r\n                            fmt={v => v.toFixed(4)} color=\"#EC4899\" compact />\r\n                        <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginBottom: 3 }}>\r\n                            <span>Market Structure</span>\r\n                            <span className=\"mono\" style={{ color: '#EC4899' }}>{mfInterp}</span>\r\n                        </div>\r\n                    </>\r\n                )}\r\n                <div className=\"flex justify-between\" style={{ fontSize: 10, color: 'var(--text-1)', marginBottom: 3 }}>\r\n                    <span>TDA Complexity</span>\r\n                    <span className=\"mono\">{tdaComplexity}</span>\r\n                </div>\r\n                <MiniGauge label=\"TDA Persistence\" value={tdaPersistence} max={1}\r\n                    fmt={v => v.toFixed(4)} color=\"#8B5CF6\" compact />\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ RQA Pattern Detection ÔöÇÔöÇ */}\r\n            <Section title=\"Pattern Detection (RQA)\" open={sections.rqa} toggle={() => toggle('rqa')}\r\n                badge={rqaInterp} badgeColor=\"#8B5CF6\">\r\n                <MiniGauge label=\"Determinism\" value={rqaDet} max={1}\r\n                    fmt={v => v.toFixed(3)} color=\"#8B5CF6\" compact />\r\n                <MiniGauge label=\"Recurrence Rate\" value={rqaRR} max={1}\r\n                    fmt={v => v.toFixed(3)} color=\"#8B5CF6\" compact />\r\n            </Section>\r\n\r\n            {/* ÔöÇÔöÇ Active Signals ÔöÇÔöÇ */}\r\n            {signals.length > 0 && (\r\n                <Section title=\"Active Signals\" open={sections.signals} toggle={() => toggle('signals')}\r\n                    badge={`${signals.length}`} badgeColor=\"var(--warning)\">\r\n                    {signals.map((s, i) => <SignalBadge key={i} signal={s} />)}\r\n                </Section>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\SignalBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[653,656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[653,656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useLivePrediction, useLiveAccuracy, useLiveAccuracySource, useLiveAccuracySamples } from '../stores/liveStore';\r\nimport { IconTrend, IconTrendDown } from './Icons';\r\n\r\nexport function SignalBadge() {\r\n    const prediction = useLivePrediction();\r\n    if (!prediction) {\r\n        return (\r\n            <div className=\"card card-compact animate-in\">\r\n                <div className=\"stat-label\">Prediction</div>\r\n                <div className=\"stat-value xs text-muted\">WaitingÔÇª</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const direction = (prediction as any).direction?.toUpperCase?.() ?? 'NEUTRAL';\r\n    const rawConf = (prediction as any).confidence ?? 0;\r\n    // Backend sends 0-100 range; normalize to 0-1 for display logic\r\n    const confidence = rawConf > 1 ? rawConf / 100 : rawConf;\r\n    const isLong = direction === 'LONG' || direction === 'UP';\r\n    const isShort = direction === 'SHORT' || direction === 'DOWN';\r\n\r\n    const badgeCls = isLong ? 'badge-long' : isShort ? 'badge-short' : 'badge-neutral';\r\n    const Icon = isLong ? IconTrend : IconTrendDown;\r\n    const pct = (confidence * 100).toFixed(2);\r\n\r\n    return (\r\n        <div className=\"card card-compact animate-in\">\r\n            <div className=\"stat-label\">Prediction</div>\r\n            <div className=\"flex items-center gap-8\" style={{ marginTop: 4 }}>\r\n                <span className={`badge ${badgeCls}`}>\r\n                    <Icon style={{ width: 12, height: 12 }} />\r\n                    {direction}\r\n                </span>\r\n                <span className=\"mono stat-value xs\">{pct}%</span>\r\n            </div>\r\n            {/* Confidence bar */}\r\n            <div className=\"progress-track\" style={{ marginTop: 8 }}>\r\n                <div\r\n                    className=\"progress-fill\"\r\n                    style={{\r\n                        width: `${confidence * 100}%`,\r\n                        background: isLong ? 'var(--positive)' : isShort ? 'var(--negative)' : 'var(--accent)',\r\n                    }}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function AccuracyCard() {\r\n    const rawAcc = useLiveAccuracy();\r\n    const source = useLiveAccuracySource();\r\n    const samples = useLiveAccuracySamples();\r\n    // Backend sends 0-100 range; normalize to 0-1 for display\r\n    const accuracy = rawAcc != null ? (rawAcc > 1 ? rawAcc / 100 : rawAcc) : null;\r\n    const pct = accuracy != null ? (accuracy * 100).toFixed(1) : 'ÔÇö';\r\n    const isGood = (accuracy ?? 0) >= 0.5;\r\n    const isLive = source === 'live';\r\n\r\n    return (\r\n        <div className=\"card card-compact animate-in\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <span className=\"stat-label\">Accuracy</span>\r\n                <span className=\"mono\" style={{\r\n                    fontSize: 9,\r\n                    padding: '1px 5px',\r\n                    borderRadius: 3,\r\n                    background: isLive ? 'rgba(0,230,118,0.12)' : 'rgba(255,171,64,0.12)',\r\n                    color: isLive ? '#69F0AE' : '#FFAB40',\r\n                    fontWeight: 600,\r\n                    letterSpacing: 0.5,\r\n                }}>\r\n                    {isLive ? `LIVE ┬À ${samples}` : 'TRAIN'}\r\n                </span>\r\n            </div>\r\n            <div className={`stat-value ${isGood ? 'text-positive' : 'text-warning'}`}>\r\n                <span className=\"mono\">{pct}{accuracy != null ? '%' : ''}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\SwissWeather.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":251,"column":94,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":251,"endColumn":97,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10858,10861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10858,10861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`animate` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nF:\\Predictor\\desktop\\src\\components\\SwissWeather.tsx:278:49\n  276 |\n  277 |         drawParticles(ctx, particlesRef.current, typeRef.current, w, h);\n> 278 |         animRef.current = requestAnimationFrame(animate);\n      |                                                 ^^^^^^^ `animate` accessed before it is declared\n  279 |     }, []);\n  280 |\n  281 |     // Init/reinit particles when city or weather changes\n\nF:\\Predictor\\desktop\\src\\components\\SwissWeather.tsx:269:5\n  267 |\n  268 |     // Canvas animation loop\n> 269 |     const animate = useCallback(() => {\n      |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 270 |         const canvas = canvasRef.current;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 271 |         if (!canvas) return;\n      ÔÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 278 |         animRef.current = requestAnimationFrame(animate);\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 279 |     }, []);\n      | ^^^^^^^^^^^^ `animate` is declared here\n  280 |\n  281 |     // Init/reinit particles when city or weather changes\n  282 |     useEffect(() => {","line":278,"column":49,"nodeType":null,"endLine":278,"endColumn":56}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useCallback } from 'react';\r\n\r\n// ÔöÇÔöÇÔöÇ Swiss Cities ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nconst CITIES = [\r\n    { name: 'Z├╝rich', lat: 47.3769, lon: 8.5417 },\r\n    { name: 'Bern', lat: 46.9481, lon: 7.4474 },\r\n    { name: 'Geneva', lat: 46.2044, lon: 6.1432 },\r\n    { name: 'Lucerne', lat: 47.0502, lon: 8.3093 },\r\n    { name: 'Basel', lat: 47.5596, lon: 7.5886 },\r\n];\r\n\r\nconst STORAGE_KEY = 'nexus-weather-city-idx';\r\n\r\n// ÔöÇÔöÇÔöÇ Weather codes ÔåÆ meta ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\ntype WeatherType = 'clear' | 'cloudy' | 'fog' | 'drizzle' | 'rain' | 'snow' | 'storm';\r\n\r\nfunction weatherMeta(code: number): { icon: string; label: string; type: WeatherType } {\r\n    if (code === 0) return { icon: 'ÔÿÇ´©Å', label: 'Clear Sky', type: 'clear' };\r\n    if (code <= 3) return { icon: 'Ôøà', label: 'Cloudy', type: 'cloudy' };\r\n    if (code <= 48) return { icon: '­ƒî½´©Å', label: 'Fog', type: 'fog' };\r\n    if (code <= 55) return { icon: '­ƒîª´©Å', label: 'Drizzle', type: 'drizzle' };\r\n    if (code <= 67) return { icon: '­ƒîº´©Å', label: 'Rain', type: 'rain' };\r\n    if (code <= 77) return { icon: '­ƒî¿´©Å', label: 'Snow', type: 'snow' };\r\n    if (code <= 86) return { icon: '­ƒî¿´©Å', label: 'Snow Showers', type: 'snow' };\r\n    if (code <= 99) return { icon: 'Ôøê´©Å', label: 'Thunderstorm', type: 'storm' };\r\n    return { icon: '­ƒîí´©Å', label: 'ÔÇö', type: 'cloudy' };\r\n}\r\n\r\ntype CityWeather = {\r\n    name: string;\r\n    temp: number;\r\n    code: number;\r\n    wind: number;\r\n    humidity: number;\r\n};\r\n\r\n// ÔöÇÔöÇÔöÇ Particle System ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\ntype Particle = {\r\n    x: number;\r\n    y: number;\r\n    vx: number;\r\n    vy: number;\r\n    size: number;\r\n    opacity: number;\r\n    life: number;\r\n};\r\n\r\nfunction createParticles(type: WeatherType, w: number, h: number): Particle[] {\r\n    const particles: Particle[] = [];\r\n    // More particles for every type ÔÇö always visually alive\r\n    const count = type === 'storm' ? 100\r\n        : type === 'rain' ? 80\r\n            : type === 'drizzle' ? 40\r\n                : type === 'snow' ? 50\r\n                    : type === 'clear' ? 30   // stars + glow orbs\r\n                        : type === 'fog' ? 20\r\n                            : type === 'cloudy' ? 18  // drifting cloud blobs\r\n                                : 12;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        const isStar = type === 'clear' && i < 22;\r\n        particles.push({\r\n            x: Math.random() * w,\r\n            y: Math.random() * h,\r\n            vx: type === 'rain' || type === 'storm' ? -0.5 + Math.random() * -0.5\r\n                : type === 'cloudy' ? 0.1 + Math.random() * 0.2\r\n                    : (Math.random() - 0.5) * 0.3,\r\n            vy: type === 'rain' ? 3 + Math.random() * 5\r\n                : type === 'storm' ? 5 + Math.random() * 6\r\n                    : type === 'drizzle' ? 1.5 + Math.random() * 2\r\n                        : type === 'snow' ? 0.3 + Math.random() * 0.8\r\n                            : type === 'clear' ? (isStar ? 0 : 0.05 + Math.random() * 0.1)\r\n                                : type === 'cloudy' ? 0.02 + Math.random() * 0.04\r\n                                    : 0.03 + Math.random() * 0.05,\r\n            size: type === 'snow' ? 2 + Math.random() * 3\r\n                : type === 'rain' || type === 'storm' ? 1\r\n                    : type === 'clear' ? (isStar ? 0.5 + Math.random() * 1.5 : 3 + Math.random() * 5)\r\n                        : type === 'fog' ? 8 + Math.random() * 16\r\n                            : type === 'cloudy' ? 6 + Math.random() * 12\r\n                                : 4 + Math.random() * 8,\r\n            opacity: type === 'clear' ? (isStar ? 0.3 + Math.random() * 0.7 : 0.08 + Math.random() * 0.15)\r\n                : type === 'fog' ? 0.03 + Math.random() * 0.06\r\n                    : type === 'cloudy' ? 0.04 + Math.random() * 0.08\r\n                        : 0.3 + Math.random() * 0.5,\r\n            life: Math.random() * Math.PI * 2, // phase offset for twinkling\r\n        });\r\n    }\r\n    return particles;\r\n}\r\n\r\nfunction drawParticles(ctx: CanvasRenderingContext2D, particles: Particle[], type: WeatherType, w: number, h: number) {\r\n    ctx.clearRect(0, 0, w, h);\r\n    const t = Date.now() * 0.001;\r\n\r\n    // Background gradient based on weather\r\n    const grad = ctx.createLinearGradient(0, 0, w, h);\r\n    if (type === 'clear') {\r\n        grad.addColorStop(0, 'rgba(15, 23, 42, 0.3)');\r\n        grad.addColorStop(1, 'rgba(30, 41, 59, 0.15)');\r\n    } else if (type === 'rain' || type === 'drizzle') {\r\n        grad.addColorStop(0, 'rgba(59, 130, 246, 0.08)');\r\n        grad.addColorStop(1, 'rgba(30, 64, 175, 0.05)');\r\n    } else if (type === 'storm') {\r\n        grad.addColorStop(0, 'rgba(88, 28, 135, 0.10)');\r\n        grad.addColorStop(1, 'rgba(30, 58, 138, 0.08)');\r\n    } else if (type === 'snow') {\r\n        grad.addColorStop(0, 'rgba(186, 230, 253, 0.08)');\r\n        grad.addColorStop(1, 'rgba(147, 197, 253, 0.05)');\r\n    } else if (type === 'fog') {\r\n        grad.addColorStop(0, 'rgba(148, 163, 184, 0.08)');\r\n        grad.addColorStop(1, 'rgba(100, 116, 139, 0.05)');\r\n    } else {\r\n        grad.addColorStop(0, 'rgba(148, 163, 184, 0.06)');\r\n        grad.addColorStop(1, 'rgba(71, 85, 105, 0.04)');\r\n    }\r\n    ctx.fillStyle = grad;\r\n    ctx.fillRect(0, 0, w, h);\r\n\r\n    for (let pi = 0; pi < particles.length; pi++) {\r\n        const p = particles[pi];\r\n\r\n        if (type === 'clear') {\r\n            const isStar = pi < 22;\r\n            if (isStar) {\r\n                // Ôÿà Twinkling stars ÔÇö pulsing opacity\r\n                const twinkle = 0.3 + Math.abs(Math.sin(t * (1.5 + pi * 0.3) + p.life)) * 0.7;\r\n                ctx.globalAlpha = twinkle;\r\n                // Star core\r\n                ctx.fillStyle = '#F8FAFC';\r\n                ctx.beginPath();\r\n                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\r\n                ctx.fill();\r\n                // Star cross glow\r\n                ctx.globalAlpha = twinkle * 0.3;\r\n                ctx.strokeStyle = '#E2E8F0';\r\n                ctx.lineWidth = 0.5;\r\n                ctx.beginPath();\r\n                ctx.moveTo(p.x - p.size * 3, p.y);\r\n                ctx.lineTo(p.x + p.size * 3, p.y);\r\n                ctx.moveTo(p.x, p.y - p.size * 3);\r\n                ctx.lineTo(p.x, p.y + p.size * 3);\r\n                ctx.stroke();\r\n            } else {\r\n                // Warm floating glow orbs\r\n                const pulse = 0.5 + Math.sin(t * 0.8 + p.life) * 0.3;\r\n                ctx.globalAlpha = p.opacity * pulse;\r\n                ctx.fillStyle = 'rgba(255, 215, 0, 0.6)';\r\n                ctx.beginPath();\r\n                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\r\n                ctx.fill();\r\n                ctx.fillStyle = 'rgba(255, 200, 50, 0.12)';\r\n                ctx.beginPath();\r\n                ctx.arc(p.x, p.y, p.size * 4, 0, Math.PI * 2);\r\n                ctx.fill();\r\n                p.x += p.vx;\r\n                p.y += p.vy;\r\n            }\r\n        } else if (type === 'rain' || type === 'drizzle') {\r\n            ctx.globalAlpha = p.opacity;\r\n            ctx.strokeStyle = type === 'drizzle' ? '#93C5FD' : '#60A5FA';\r\n            ctx.lineWidth = type === 'drizzle' ? 0.5 : 1;\r\n            ctx.beginPath();\r\n            ctx.moveTo(p.x, p.y);\r\n            ctx.lineTo(p.x + p.vx * 3, p.y + p.vy * 2.5);\r\n            ctx.stroke();\r\n            p.x += p.vx;\r\n            p.y += p.vy;\r\n        } else if (type === 'storm') {\r\n            ctx.globalAlpha = p.opacity;\r\n            ctx.strokeStyle = '#818CF8';\r\n            ctx.lineWidth = 1.2;\r\n            ctx.beginPath();\r\n            ctx.moveTo(p.x, p.y);\r\n            ctx.lineTo(p.x + p.vx * 4, p.y + p.vy * 3);\r\n            ctx.stroke();\r\n            p.x += p.vx;\r\n            p.y += p.vy;\r\n            // Lightning flash (slightly more frequent)\r\n            if (Math.random() < 0.003) {\r\n                ctx.globalAlpha = 0.2;\r\n                ctx.fillStyle = '#E0E7FF';\r\n                ctx.fillRect(0, 0, w, h);\r\n            }\r\n        } else if (type === 'snow') {\r\n            const drift = Math.sin(p.life + t * 1.2) * 0.4;\r\n            ctx.globalAlpha = p.opacity;\r\n            ctx.fillStyle = '#E0F2FE';\r\n            ctx.beginPath();\r\n            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\r\n            ctx.fill();\r\n            // Soft glow around each flake\r\n            ctx.globalAlpha = p.opacity * 0.2;\r\n            ctx.beginPath();\r\n            ctx.arc(p.x, p.y, p.size * 2.5, 0, Math.PI * 2);\r\n            ctx.fill();\r\n            p.x += p.vx + drift;\r\n            p.y += p.vy;\r\n        } else if (type === 'fog') {\r\n            const pulse = 0.7 + Math.sin(t * 0.5 + p.life) * 0.3;\r\n            ctx.globalAlpha = p.opacity * pulse;\r\n            ctx.fillStyle = 'rgba(148, 163, 184, 1)';\r\n            ctx.beginPath();\r\n            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\r\n            ctx.fill();\r\n            p.x += p.vx;\r\n            p.y += p.vy;\r\n        } else {\r\n            // Cloudy ÔÇö drifting gray cloud blobs\r\n            const pulse = 0.6 + Math.sin(t * 0.4 + p.life) * 0.4;\r\n            ctx.globalAlpha = p.opacity * pulse;\r\n            ctx.fillStyle = 'rgba(100, 116, 139, 1)';\r\n            ctx.beginPath();\r\n            ctx.arc(p.x, p.y, p.size * (0.8 + Math.sin(t * 0.3 + pi) * 0.2), 0, Math.PI * 2);\r\n            ctx.fill();\r\n            p.x += p.vx;\r\n            p.y += p.vy;\r\n        }\r\n\r\n        // Wrap around\r\n        if (p.y > h + 20) { p.y = -20; p.x = Math.random() * w; }\r\n        if (p.y < -20) { p.y = h + 20; p.x = Math.random() * w; }\r\n        if (p.x > w + 20) p.x = -20;\r\n        if (p.x < -20) p.x = w + 20;\r\n    }\r\n\r\n    ctx.globalAlpha = 1;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Component ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nexport default function SwissWeather() {\r\n    const [cities, setCities] = useState<CityWeather[]>([]);\r\n    const [idx, setIdx] = useState(() => {\r\n        try { return parseInt(localStorage.getItem(STORAGE_KEY) || '0') || 0; } catch { return 0; }\r\n    });\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const particlesRef = useRef<Particle[]>([]);\r\n    const animRef = useRef<number>(0);\r\n    const typeRef = useRef<WeatherType>('cloudy');\r\n\r\n    // Persist city selection\r\n    useEffect(() => { localStorage.setItem(STORAGE_KEY, String(idx)); }, [idx]);\r\n\r\n    useEffect(() => {\r\n        async function fetchWeather() {\r\n            try {\r\n                const lats = CITIES.map(c => c.lat).join(',');\r\n                const lons = CITIES.map(c => c.lon).join(',');\r\n                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lats}&longitude=${lons}&current=temperature_2m,weather_code,wind_speed_10m,relative_humidity_2m&timezone=Europe/Zurich`;\r\n                const resp = await fetch(url);\r\n                const data = await resp.json();\r\n                const results: CityWeather[] = (Array.isArray(data) ? data : [data]).map((d: any, i: number) => ({\r\n                    name: CITIES[i].name,\r\n                    temp: d.current?.temperature_2m ?? 0,\r\n                    code: d.current?.weather_code ?? 0,\r\n                    wind: d.current?.wind_speed_10m ?? 0,\r\n                    humidity: d.current?.relative_humidity_2m ?? 0,\r\n                }));\r\n                setCities(results);\r\n            } catch (e) {\r\n                console.error('Weather fetch error:', e);\r\n            }\r\n        }\r\n        fetchWeather();\r\n        const timer = setInterval(fetchWeather, 600_000);\r\n        return () => clearInterval(timer);\r\n    }, []);\r\n\r\n    // Canvas animation loop\r\n    const animate = useCallback(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) return;\r\n        const w = canvas.width;\r\n        const h = canvas.height;\r\n\r\n        drawParticles(ctx, particlesRef.current, typeRef.current, w, h);\r\n        animRef.current = requestAnimationFrame(animate);\r\n    }, []);\r\n\r\n    // Init/reinit particles when city or weather changes\r\n    useEffect(() => {\r\n        const city = cities[idx];\r\n        if (!city) return;\r\n        const meta = weatherMeta(city.code);\r\n        typeRef.current = meta.type;\r\n\r\n        const canvas = canvasRef.current;\r\n        if (canvas) {\r\n            const rect = canvas.parentElement?.getBoundingClientRect();\r\n            canvas.width = rect?.width ?? 200;\r\n            canvas.height = rect?.height ?? 150;\r\n            particlesRef.current = createParticles(meta.type, canvas.width, canvas.height);\r\n        }\r\n    }, [cities, idx]);\r\n\r\n    // Start/stop animation\r\n    useEffect(() => {\r\n        animRef.current = requestAnimationFrame(animate);\r\n        return () => cancelAnimationFrame(animRef.current);\r\n    }, [animate]);\r\n\r\n    // Resize canvas\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        const ro = new ResizeObserver(() => {\r\n            const rect = canvas.parentElement?.getBoundingClientRect();\r\n            if (rect) {\r\n                canvas.width = rect.width;\r\n                canvas.height = rect.height;\r\n                particlesRef.current = createParticles(typeRef.current, rect.width, rect.height);\r\n            }\r\n        });\r\n        ro.observe(canvas.parentElement!);\r\n        return () => ro.disconnect();\r\n    }, []);\r\n\r\n    const city = cities[idx];\r\n    const meta = city ? weatherMeta(city.code) : { icon: 'ÔÅ│', label: 'Loading', type: 'cloudy' as WeatherType };\r\n\r\n    const tempColor = !city ? 'var(--text-2)'\r\n        : city.temp <= 0 ? '#64B5F6'\r\n            : city.temp <= 10 ? '#81D4FA'\r\n                : city.temp <= 20 ? '#FFD740'\r\n                    : city.temp <= 30 ? '#FF9800'\r\n                        : '#FF5252';\r\n\r\n    const cycleCity = (dir: number) => {\r\n        if (cities.length === 0) return;\r\n        setIdx(prev => (prev + dir + cities.length) % cities.length);\r\n    };\r\n\r\n    return (\r\n        <div className=\"weather-card\" style={{ position: 'relative', overflow: 'hidden', height: '100%' }}>\r\n            {/* Animated canvas background */}\r\n            <canvas\r\n                ref={canvasRef}\r\n                style={{\r\n                    position: 'absolute', inset: 0,\r\n                    width: '100%', height: '100%',\r\n                    pointerEvents: 'none', zIndex: 0,\r\n                }}\r\n            />\r\n\r\n            <div style={{ position: 'relative', zIndex: 1, padding: 12 }}>\r\n                <div className=\"stat-label\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <span>­ƒç¿­ƒç¡ Switzerland</span>\r\n                </div>\r\n                {city ? (\r\n                    <>\r\n                        <div className=\"stat-value\" style={{ display: 'flex', alignItems: 'center', gap: 6 }}>\r\n                            <span style={{ fontSize: 20 }}>{meta.icon}</span>\r\n                            <span className=\"mono\" style={{ color: tempColor }}>\r\n                                {city.temp.toFixed(1)}┬░C\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"stat-sub\" style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                            <span style={{ fontWeight: 600 }}>{city.name}</span>\r\n                            <span style={{ opacity: 0.6 }}>┬À</span>\r\n                            <span>{meta.label}</span>\r\n                            <span style={{ opacity: 0.6 }}>┬À</span>\r\n                            <span>­ƒÆ¿ {city.wind.toFixed(0)}km/h</span>\r\n                        </div>\r\n                        {/* City selector */}\r\n                        <div style={{\r\n                            display: 'flex', gap: 4, marginTop: 6,\r\n                            alignItems: 'center', justifyContent: 'center',\r\n                        }}>\r\n                            <button\r\n                                onClick={() => cycleCity(-1)}\r\n                                style={{\r\n                                    all: 'unset', cursor: 'pointer', fontSize: 10,\r\n                                    color: 'var(--text-2)', padding: '0 4px',\r\n                                }}\r\n                                title=\"Previous city\"\r\n                            >ÔùÇ</button>\r\n                            {cities.map((c, i) => (\r\n                                <button\r\n                                    key={c.name}\r\n                                    onClick={() => setIdx(i)}\r\n                                    style={{\r\n                                        all: 'unset', cursor: 'pointer',\r\n                                        width: i === idx ? 14 : 5, height: 5,\r\n                                        borderRadius: 3,\r\n                                        background: i === idx ? 'var(--accent)' : 'rgba(255,255,255,0.15)',\r\n                                        transition: 'all 0.3s ease',\r\n                                    }}\r\n                                    title={c.name}\r\n                                />\r\n                            ))}\r\n                            <button\r\n                                onClick={() => cycleCity(1)}\r\n                                style={{\r\n                                    all: 'unset', cursor: 'pointer', fontSize: 10,\r\n                                    color: 'var(--text-2)', padding: '0 4px',\r\n                                }}\r\n                                title=\"Next city\"\r\n                            >ÔûÂ</button>\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"stat-value\" style={{ color: 'var(--text-2)', fontSize: 13 }}>Loading...</div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\SystemHealth.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\TradingViewChart.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'timeframe'. Either include it or remove the dependency array.","line":236,"column":8,"nodeType":"ArrayExpression","endLine":236,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [timeframe]","fix":{"range":[8417,8419],"text":"[timeframe]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TradingViewChart ÔÇö Professional candlestick chart using TradingView Lightweight Charts v5.\r\n * \r\n * Features:\r\n *  - Candlestick series with volume histogram overlay\r\n *  - MA(7), MA(25), MA(99) line overlays\r\n *  - Real-time candle updates via WebSocket\r\n *  - Multi-timeframe selector (1m, 5m, 15m, 1H, 4H, 1D)\r\n *  - Crosshair with OHLCV tooltip\r\n *  - Dark theme matching our design system\r\n *  - Auto-resize with ResizeObserver\r\n * \r\n * Based on: lightweight-charts v5 API\r\n *   - chart.addSeries(CandlestickSeries) ÔÇö NOT addCandlestickSeries()\r\n *   - series.update() for real-time ÔÇö NOT setData()\r\n *   - Time format: UNIX seconds (NOT milliseconds)\r\n */\r\n\r\nimport { useEffect, useRef, useState, useCallback } from 'react';\r\nimport {\r\n    createChart,\r\n    CandlestickSeries,\r\n    HistogramSeries,\r\n    LineSeries,\r\n    type IChartApi,\r\n    type ISeriesApi,\r\n    type CandlestickData,\r\n    type UTCTimestamp,\r\n} from 'lightweight-charts';\r\nimport { useLivePrice, useLiveChangePct, useLiveHigh24h, useLiveLow24h, useLiveVolumeBtc } from '../stores/liveStore';\r\nimport { IconWarning } from './Icons';\r\n\r\n// ÔöÇÔöÇÔöÇ Types ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\ntype Timeframe = '1m' | '5m' | '15m' | '1h' | '4h' | '1d';\r\n\r\ntype OHLCVRow = {\r\n    time: UTCTimestamp;\r\n    open: number;\r\n    high: number;\r\n    low: number;\r\n    close: number;\r\n    volume?: number;\r\n};\r\n\r\ntype ChartRefs = {\r\n    chart: IChartApi | null;\r\n    candleSeries: ISeriesApi<'Candlestick'> | null;\r\n    volumeSeries: ISeriesApi<'Histogram'> | null;\r\n    ma7Series: ISeriesApi<'Line'> | null;\r\n    ma25Series: ISeriesApi<'Line'> | null;\r\n    ma99Series: ISeriesApi<'Line'> | null;\r\n    trajectorySeries: ISeriesApi<'Line'> | null;\r\n};\r\n\r\ntype TrajectoryData = {\r\n    trajectory: { time: number; value: number }[];\r\n    anchor: { time: number; value: number };\r\n    direction: 'UP' | 'FLAT' | 'DOWN';\r\n    confidence: number;\r\n};\r\n\r\nconst TIMEFRAMES: { label: string; value: Timeframe }[] = [\r\n    { label: '1m', value: '1m' },\r\n    { label: '5m', value: '5m' },\r\n    { label: '15m', value: '15m' },\r\n    { label: '1H', value: '1h' },\r\n    { label: '4H', value: '4h' },\r\n    { label: '1D', value: '1d' },\r\n];\r\n\r\nconst API_BASE = 'http://127.0.0.1:8420';\r\n\r\n// ÔöÇÔöÇÔöÇ Helpers ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nfunction calculateMA(data: OHLCVRow[], period: number): { time: UTCTimestamp; value: number }[] {\r\n    const result: { time: UTCTimestamp; value: number }[] = [];\r\n    for (let i = period - 1; i < data.length; i++) {\r\n        let sum = 0;\r\n        for (let j = 0; j < period; j++) {\r\n            sum += data[i - j].close;\r\n        }\r\n        result.push({ time: data[i].time, value: sum / period });\r\n    }\r\n    return result;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Component ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nexport default function TradingViewChart() {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const chartRefs = useRef<ChartRefs>({\r\n        chart: null,\r\n        candleSeries: null,\r\n        volumeSeries: null,\r\n        ma7Series: null,\r\n        ma25Series: null,\r\n        ma99Series: null,\r\n        trajectorySeries: null,\r\n    });\r\n\r\n    const [timeframe, setTimeframe] = useState<Timeframe>('1m');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [crosshairData, setCrosshairData] = useState<CandlestickData | null>(null);\r\n    const [trajectoryInfo, setTrajectoryInfo] = useState<TrajectoryData | null>(null);\r\n    // Granular selectors ÔÇö chart only re-renders on price/stats changes\r\n    const livePrice = useLivePrice();\r\n    const changePct = useLiveChangePct();\r\n    const high24h = useLiveHigh24h();\r\n    const low24h = useLiveLow24h();\r\n    const volumeBtc = useLiveVolumeBtc();\r\n\r\n    // Track current candle for real-time updates\r\n    const currentCandleRef = useRef<OHLCVRow | null>(null);\r\n\r\n    // ÔöÇÔöÇÔöÇ Chart Initialization ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    useEffect(() => {\r\n        if (!containerRef.current) return;\r\n\r\n        const chart = createChart(containerRef.current, {\r\n            width: containerRef.current.clientWidth,\r\n            height: containerRef.current.clientHeight || 400,\r\n            layout: {\r\n                background: { color: '#0A0E17' },\r\n                textColor: '#9CA3AF',\r\n                fontFamily: \"'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace\",\r\n                fontSize: 11,\r\n            },\r\n            grid: {\r\n                vertLines: { color: 'rgba(31, 41, 55, 0.5)' },\r\n                horzLines: { color: 'rgba(31, 41, 55, 0.5)' },\r\n            },\r\n            crosshair: {\r\n                mode: 0, // CrosshairMode.Normal\r\n                vertLine: { color: 'rgba(255, 255, 255, 0.15)', width: 1, style: 2 },\r\n                horzLine: { color: 'rgba(255, 255, 255, 0.15)', width: 1, style: 2 },\r\n            },\r\n            rightPriceScale: {\r\n                borderColor: 'rgba(31, 41, 55, 0.8)',\r\n                scaleMargins: { top: 0.05, bottom: 0.25 },\r\n            },\r\n            timeScale: {\r\n                borderColor: 'rgba(31, 41, 55, 0.8)',\r\n                timeVisible: true,\r\n                secondsVisible: timeframe === '1m',\r\n                fixLeftEdge: true,\r\n                fixRightEdge: true,\r\n            },\r\n        });\r\n\r\n        // Candlestick series ÔÇö Binance-style colors\r\n        const candleSeries = chart.addSeries(CandlestickSeries, {\r\n            upColor: '#0ECB81',\r\n            downColor: '#F6465D',\r\n            borderUpColor: '#0ECB81',\r\n            borderDownColor: '#F6465D',\r\n            wickUpColor: '#0ECB81',\r\n            wickDownColor: '#F6465D',\r\n        });\r\n\r\n        // Volume histogram ÔÇö bottom 20%\r\n        const volumeSeries = chart.addSeries(HistogramSeries, {\r\n            priceFormat: { type: 'volume' },\r\n            priceScaleId: 'volume',\r\n        });\r\n        chart.priceScale('volume').applyOptions({\r\n            scaleMargins: { top: 0.8, bottom: 0 },\r\n        });\r\n\r\n        // MA(7) ÔÇö yellow\r\n        const ma7Series = chart.addSeries(LineSeries, {\r\n            color: '#F0B90B',\r\n            lineWidth: 1,\r\n            priceLineVisible: false,\r\n            lastValueVisible: false,\r\n            crosshairMarkerVisible: false,\r\n        });\r\n\r\n        // MA(25) ÔÇö pink\r\n        const ma25Series = chart.addSeries(LineSeries, {\r\n            color: '#E040FB',\r\n            lineWidth: 1,\r\n            priceLineVisible: false,\r\n            lastValueVisible: false,\r\n            crosshairMarkerVisible: false,\r\n        });\r\n\r\n        // MA(99) ÔÇö cyan\r\n        const ma99Series = chart.addSeries(LineSeries, {\r\n            color: '#00BCD4',\r\n            lineWidth: 1,\r\n            priceLineVisible: false,\r\n            lastValueVisible: false,\r\n            crosshairMarkerVisible: false,\r\n        });\r\n\r\n        // AI Trajectory ÔÇö dashed blue-grey ghost line\r\n        const trajectorySeries = chart.addSeries(LineSeries, {\r\n            color: 'rgba(120, 180, 255, 0.6)',\r\n            lineWidth: 2,\r\n            lineStyle: 2, // Dashed\r\n            priceLineVisible: false,\r\n            lastValueVisible: false,\r\n            crosshairMarkerVisible: false,\r\n            pointMarkersVisible: true,\r\n        });\r\n\r\n        // Crosshair tooltip\r\n        chart.subscribeCrosshairMove((param) => {\r\n            if (param.time && param.seriesData) {\r\n                const candleData = param.seriesData.get(candleSeries);\r\n                if (candleData && 'open' in candleData) {\r\n                    setCrosshairData(candleData as CandlestickData);\r\n                }\r\n            } else {\r\n                setCrosshairData(null);\r\n            }\r\n        });\r\n\r\n        chartRefs.current = { chart, candleSeries, volumeSeries, ma7Series, ma25Series, ma99Series, trajectorySeries };\r\n\r\n        // ResizeObserver for responsive\r\n        const observer = new ResizeObserver(entries => {\r\n            const { width, height } = entries[0].contentRect;\r\n            chart.applyOptions({ width, height });\r\n        });\r\n        observer.observe(containerRef.current);\r\n\r\n        return () => {\r\n            observer.disconnect();\r\n            chart.remove();\r\n            chartRefs.current = {\r\n                chart: null, candleSeries: null, volumeSeries: null,\r\n                ma7Series: null, ma25Series: null, ma99Series: null,\r\n                trajectorySeries: null,\r\n            };\r\n        };\r\n    }, []); // Chart created once\r\n\r\n\r\n    // ÔöÇÔöÇÔöÇ Data Loading ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const loadData = useCallback(async (tf: Timeframe) => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const res = await fetch(`${API_BASE}/api/market-data?interval=${tf}&limit=500`);\r\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\r\n            const result = await res.json();\r\n            const candles: OHLCVRow[] = (result.candles || []).map((c: Record<string, unknown>) => ({\r\n                time: (Math.floor(Number(c.timestamp || c.time) / 1000)) as UTCTimestamp,\r\n                open: Number(c.open),\r\n                high: Number(c.high),\r\n                low: Number(c.low),\r\n                close: Number(c.close),\r\n                volume: Number(c.volume || 0),\r\n            }));\r\n\r\n            if (candles.length === 0) {\r\n                setError('No data available');\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Sort by time ascending\r\n            candles.sort((a, b) => (a.time as number) - (b.time as number));\r\n\r\n            // Deduplicate by time\r\n            const seen = new Set<number>();\r\n            const uniqueCandles = candles.filter(c => {\r\n                if (seen.has(c.time as number)) return false;\r\n                seen.add(c.time as number);\r\n                return true;\r\n            });\r\n\r\n            const refs = chartRefs.current;\r\n            if (!refs.candleSeries) return;\r\n\r\n            // Set data\r\n            refs.candleSeries.setData(uniqueCandles);\r\n\r\n            // Volume with color\r\n            refs.volumeSeries?.setData(\r\n                uniqueCandles.map(c => ({\r\n                    time: c.time,\r\n                    value: c.volume || 0,\r\n                    color: c.close >= c.open\r\n                        ? 'rgba(14, 203, 129, 0.3)'\r\n                        : 'rgba(246, 70, 93, 0.3)',\r\n                }))\r\n            );\r\n\r\n            // MAs\r\n            refs.ma7Series?.setData(calculateMA(uniqueCandles, 7));\r\n            refs.ma25Series?.setData(calculateMA(uniqueCandles, 25));\r\n            if (uniqueCandles.length >= 99) {\r\n                refs.ma99Series?.setData(calculateMA(uniqueCandles, 99));\r\n            }\r\n\r\n            // Track the latest candle for real-time updates\r\n            currentCandleRef.current = uniqueCandles[uniqueCandles.length - 1];\r\n\r\n            // Scroll to last candle\r\n            refs.chart?.timeScale().scrollToPosition(5, false);\r\n\r\n        } catch (e) {\r\n            console.error('Chart data load failed:', e);\r\n            setError(e instanceof Error ? e.message : 'Failed to load data');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Load data when timeframe changes\r\n    useEffect(() => {\r\n        loadData(timeframe);\r\n    }, [timeframe, loadData]);\r\n\r\n    // Update timeScale seconds visibility\r\n    useEffect(() => {\r\n        chartRefs.current.chart?.timeScale().applyOptions({\r\n            secondsVisible: timeframe === '1m',\r\n        });\r\n    }, [timeframe]);\r\n\r\n\r\n    // ÔöÇÔöÇÔöÇ Real-Time Candle Update ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    useEffect(() => {\r\n        if (!livePrice || livePrice <= 0) return;\r\n        const refs = chartRefs.current;\r\n        if (!refs.candleSeries || !currentCandleRef.current) return;\r\n\r\n        const now = Math.floor(Date.now() / 1000);\r\n        const tfSeconds = getTimeframeSeconds(timeframe);\r\n        const candleStart = Math.floor(now / tfSeconds) * tfSeconds;\r\n\r\n        const current = currentCandleRef.current;\r\n\r\n        if ((current.time as number) === candleStart) {\r\n            // Update existing candle\r\n            current.high = Math.max(current.high, livePrice);\r\n            current.low = Math.min(current.low, livePrice);\r\n            current.close = livePrice;\r\n        } else if (candleStart > (current.time as number)) {\r\n            // New candle\r\n            const newCandle: OHLCVRow = {\r\n                time: candleStart as UTCTimestamp,\r\n                open: livePrice,\r\n                high: livePrice,\r\n                low: livePrice,\r\n                close: livePrice,\r\n            };\r\n            currentCandleRef.current = newCandle;\r\n        }\r\n\r\n        // Push update to chart\r\n        refs.candleSeries.update({\r\n            time: currentCandleRef.current.time,\r\n            open: currentCandleRef.current.open,\r\n            high: currentCandleRef.current.high,\r\n            low: currentCandleRef.current.low,\r\n            close: currentCandleRef.current.close,\r\n        });\r\n\r\n        // Update volume bar color\r\n        refs.volumeSeries?.update({\r\n            time: currentCandleRef.current.time,\r\n            value: currentCandleRef.current.volume || 0,\r\n            color: currentCandleRef.current.close >= currentCandleRef.current.open\r\n                ? 'rgba(14, 203, 129, 0.3)'\r\n                : 'rgba(246, 70, 93, 0.3)',\r\n        });\r\n    }, [livePrice, timeframe]);\r\n\r\n\r\n    // ÔöÇÔöÇÔöÇ AI Trajectory Polling ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    useEffect(() => {\r\n        let cancelled = false;\r\n\r\n        const fetchTrajectory = async () => {\r\n            try {\r\n                const res = await fetch(`${API_BASE}/api/prediction/trajectory?interval=${timeframe}&steps=5`);\r\n                if (!res.ok) return;\r\n                const data: TrajectoryData = await res.json();\r\n                if (cancelled) return;\r\n\r\n                setTrajectoryInfo(data);\r\n\r\n                const refs = chartRefs.current;\r\n                if (!refs.trajectorySeries) return;\r\n\r\n                // Build line: perfectly sew the anchor point to the live chart's current candle close\r\n                // to eliminate 'gaps' caused by slight async delays between the HTTP fetch and the WebSocket.\r\n                const anchorValue = currentCandleRef.current ? currentCandleRef.current.close : data.anchor.value;\r\n\r\n                const points = [\r\n                    { time: data.anchor.time as UTCTimestamp, value: anchorValue },\r\n                    ...data.trajectory.map(p => ({\r\n                        time: p.time as UTCTimestamp,\r\n                        value: p.value,\r\n                    })),\r\n                ];\r\n\r\n                // Color based on direction\r\n                const color = data.direction === 'UP'\r\n                    ? 'rgba(14, 203, 129, 0.5)'\r\n                    : data.direction === 'DOWN'\r\n                        ? 'rgba(246, 70, 93, 0.5)'\r\n                        : 'rgba(156, 163, 175, 0.5)';\r\n\r\n                refs.trajectorySeries.applyOptions({ color });\r\n                refs.trajectorySeries.setData(points);\r\n            } catch {\r\n                // Silently fail ÔÇö trajectory is non-critical\r\n            }\r\n        };\r\n\r\n        fetchTrajectory();\r\n        const interval = setInterval(fetchTrajectory, 30_000); // Every 30s\r\n\r\n        return () => {\r\n            cancelled = true;\r\n            clearInterval(interval);\r\n        };\r\n    }, [timeframe]);\r\n\r\n\r\n    // ÔöÇÔöÇÔöÇ Render ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    return (\r\n        <div className=\"tv-chart-wrapper\">\r\n            {/* Header bar */}\r\n            <div className=\"tv-chart-header\">\r\n                <div className=\"tv-chart-symbol\">\r\n                    <span className=\"tv-chart-pair\">BTC/USDT</span>\r\n                    {livePrice !== null && livePrice > 0 && (\r\n                        <span className=\"tv-chart-price mono\" style={{\r\n                            color: (changePct ?? 0) >= 0 ? '#0ECB81' : '#F6465D'\r\n                        }}>\r\n                            ${livePrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Timeframe selector */}\r\n                <div className=\"tv-chart-timeframes\">\r\n                    {TIMEFRAMES.map(tf => (\r\n                        <button\r\n                            key={tf.value}\r\n                            className={`tv-tf-btn ${timeframe === tf.value ? 'active' : ''}`}\r\n                            onClick={() => setTimeframe(tf.value)}\r\n                        >\r\n                            {tf.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* 24h stats */}\r\n                <div className=\"tv-chart-stats\">\r\n                    {high24h !== null && (\r\n                        <span className=\"tv-stat\">\r\n                            <span className=\"tv-stat-label\">24h H</span>\r\n                            <span className=\"tv-stat-value mono\">${high24h.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\r\n                        </span>\r\n                    )}\r\n                    {low24h !== null && (\r\n                        <span className=\"tv-stat\">\r\n                            <span className=\"tv-stat-label\">24h L</span>\r\n                            <span className=\"tv-stat-value mono\">${low24h.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span>\r\n                        </span>\r\n                    )}\r\n                    {volumeBtc !== null && (\r\n                        <span className=\"tv-stat\">\r\n                            <span className=\"tv-stat-label\">Vol</span>\r\n                            <span className=\"tv-stat-value mono\">{volumeBtc.toLocaleString(undefined, { maximumFractionDigits: 0 })} BTC</span>\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Crosshair tooltip */}\r\n            {crosshairData && (\r\n                <div className=\"tv-chart-tooltip\">\r\n                    <span>O<span className=\"mono\">{Number(crosshairData.open).toFixed(2)}</span></span>\r\n                    <span>H<span className=\"mono\">{Number(crosshairData.high).toFixed(2)}</span></span>\r\n                    <span>L<span className=\"mono\">{Number(crosshairData.low).toFixed(2)}</span></span>\r\n                    <span>C<span className=\"mono\">{Number(crosshairData.close).toFixed(2)}</span></span>\r\n                </div>\r\n            )}\r\n\r\n            {/* MA Legend */}\r\n            <div className=\"tv-chart-ma-legend\">\r\n                <span style={{ color: '#F0B90B' }}>MA(7)</span>\r\n                <span style={{ color: '#E040FB' }}>MA(25)</span>\r\n                <span style={{ color: '#00BCD4' }}>MA(99)</span>\r\n                {trajectoryInfo && (\r\n                    <span style={{\r\n                        color: trajectoryInfo.direction === 'UP' ? 'rgba(14, 203, 129, 0.8)'\r\n                            : trajectoryInfo.direction === 'DOWN' ? 'rgba(246, 70, 93, 0.8)'\r\n                                : 'rgba(156, 163, 175, 0.8)',\r\n                        display: 'inline-flex',\r\n                        alignItems: 'center',\r\n                        gap: 4,\r\n                    }}>\r\n                        <span style={{\r\n                            width: 14, height: 2,\r\n                            borderTop: '2px dashed currentColor',\r\n                            display: 'inline-block',\r\n                        }} />\r\n                        AI Forecast\r\n                        <span style={{\r\n                            fontSize: 9,\r\n                            padding: '1px 4px',\r\n                            borderRadius: 3,\r\n                            background: 'rgba(255,255,255,0.08)',\r\n                            fontWeight: 600,\r\n                        }}>\r\n                            {trajectoryInfo.direction} {(trajectoryInfo.confidence * 100).toFixed(0)}%\r\n                        </span>\r\n                    </span>\r\n                )}\r\n            </div>\r\n\r\n            {/* Chart container */}\r\n            <div\r\n                ref={containerRef}\r\n                className=\"tv-chart-container\"\r\n                style={{ position: 'relative', width: '100%', flex: 1 }}\r\n            />\r\n\r\n            {/* Loading overlay */}\r\n            {isLoading && (\r\n                <div className=\"tv-chart-loading\">\r\n                    <div className=\"tv-loading-spinner\" />\r\n                    Loading chart data...\r\n                </div>\r\n            )}\r\n\r\n            {/* Error overlay */}\r\n            {error && !isLoading && (\r\n                <div className=\"tv-chart-error\">\r\n                    <IconWarning size={14} style={{ marginRight: 5, verticalAlign: -2 }} /> {error}\r\n                    <button className=\"tv-retry-btn\" onClick={() => loadData(timeframe)}>\r\n                        Retry\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n// ÔöÇÔöÇÔöÇ Utility ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nfunction getTimeframeSeconds(tf: Timeframe): number {\r\n    switch (tf) {\r\n        case '1m': return 60;\r\n        case '5m': return 300;\r\n        case '15m': return 900;\r\n        case '1h': return 3600;\r\n        case '4h': return 14400;\r\n        case '1d': return 86400;\r\n        default: return 60;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\TrainingLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\components\\WorldClock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\hooks\\useApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\hooks\\useKeyboardShortcuts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\FirstRunSetup.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1323,1326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1323,1326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { apiPost } from '../hooks/useApi';\r\nimport { toast } from '../stores/toastStore';\r\nimport { IconNexus, IconCheck, IconKey, IconEye, IconEyeOff } from '../components/Icons';\r\n\r\ntype Props = { onComplete: () => void };\r\n\r\nconst STEPS = ['Welcome', 'API Keys', 'Ready'] as const;\r\n\r\nexport default function FirstRunSetup({ onComplete }: Props) {\r\n    const [step, setStep] = useState(0);\r\n    const [binanceKey, setBinanceKey] = useState('');\r\n    const [binanceSecret, setBinanceSecret] = useState('');\r\n    const [openaiKey, setOpenaiKey] = useState('');\r\n    const [showSecret, setShowSecret] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    const saveKeys = async () => {\r\n        setSaving(true);\r\n        try {\r\n            const keys: Record<string, string> = {};\r\n            if (binanceKey.trim()) keys.BINANCE_API_KEY = binanceKey.trim();\r\n            if (binanceSecret.trim()) keys.BINANCE_API_SECRET = binanceSecret.trim();\r\n            if (openaiKey.trim()) keys.OPENAI_API_KEY = openaiKey.trim();\r\n\r\n            for (const [key, value] of Object.entries(keys)) {\r\n                await apiPost('/api/settings/keys', { key, value });\r\n            }\r\n\r\n            toast.success('API keys saved');\r\n            setStep(2);\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    const finish = async () => {\r\n        try {\r\n            await apiPost('/api/settings', { first_run_done: true });\r\n        } catch { /* ignore */ }\r\n        onComplete();\r\n    };\r\n\r\n    return (\r\n        <div className=\"setup-root\">\r\n            <div className=\"setup-card animate-in\">\r\n                {/* Progress */}\r\n                <div className=\"setup-steps\">\r\n                    {STEPS.map((_, i) => (\r\n                        <div key={i} className={`setup-step ${i < step ? 'done' : i === step ? 'current' : ''}`} />\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Step 0: Welcome */}\r\n                {step === 0 && (\r\n                    <div className=\"flex-col items-center gap-16\" style={{ textAlign: 'center' }}>\r\n                        <IconNexus style={{ width: 48, height: 48, color: 'var(--accent)' }} />\r\n                        <div>\r\n                            <h1 style={{ fontSize: 20, fontWeight: 700, marginBottom: 8 }}>Welcome to Nexus Shadow-Quant</h1>\r\n                            <p style={{ fontSize: 13, color: 'var(--text-1)', maxWidth: 360, margin: '0 auto' }}>\r\n                                Institutional-grade Bitcoin intelligence with real-time prediction,\r\n                                quant analysis, and paper trading.\r\n                            </p>\r\n                        </div>\r\n                        <button className=\"btn btn-primary\" onClick={() => setStep(1)}>Get Started</button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 1: API Keys */}\r\n                {step === 1 && (\r\n                    <div className=\"flex-col gap-16\">\r\n                        <div>\r\n                            <h2 style={{ fontSize: 16, fontWeight: 700, marginBottom: 4 }}>Configure API Keys</h2>\r\n                            <p style={{ fontSize: 12, color: 'var(--text-2)' }}>\r\n                                You can skip this step and configure keys later in Settings.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex-col gap-10\">\r\n                            <div>\r\n                                <label style={{ fontSize: 11, color: 'var(--text-1)', display: 'block', marginBottom: 4 }}>\r\n                                    <IconKey style={{ width: 12, height: 12, display: 'inline', marginRight: 4 }} />\r\n                                    Binance API Key\r\n                                </label>\r\n                                <input className=\"input\" value={binanceKey} onChange={e => setBinanceKey(e.target.value)} placeholder=\"Enter API keyÔÇª\" />\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ fontSize: 11, color: 'var(--text-1)', display: 'block', marginBottom: 4 }}>Binance Secret</label>\r\n                                <div className=\"flex gap-8\">\r\n                                    <input className=\"input\" type={showSecret ? 'text' : 'password'} value={binanceSecret} onChange={e => setBinanceSecret(e.target.value)} placeholder=\"Enter secretÔÇª\" />\r\n                                    <button className=\"btn btn-sm btn-ghost\" onClick={() => setShowSecret(s => !s)}>\r\n                                        {showSecret ? <IconEyeOff style={{ width: 14, height: 14 }} /> : <IconEye style={{ width: 14, height: 14 }} />}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ fontSize: 11, color: 'var(--text-1)', display: 'block', marginBottom: 4 }}>OpenAI API Key</label>\r\n                                <input className=\"input\" value={openaiKey} onChange={e => setOpenaiKey(e.target.value)} placeholder=\"sk-ÔÇª\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-between\">\r\n                            <button className=\"btn btn-ghost\" onClick={() => setStep(2)}>Skip</button>\r\n                            <button className=\"btn btn-primary\" onClick={saveKeys} disabled={saving}>\r\n                                {saving ? 'SavingÔÇª' : 'Save & Continue'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Step 2: Ready */}\r\n                {step === 2 && (\r\n                    <div className=\"flex-col items-center gap-16\" style={{ textAlign: 'center' }}>\r\n                        <div style={{\r\n                            width: 56, height: 56, borderRadius: '50%',\r\n                            background: 'var(--positive-dim)', display: 'flex',\r\n                            alignItems: 'center', justifyContent: 'center',\r\n                        }}>\r\n                            <IconCheck style={{ width: 28, height: 28, color: 'var(--positive)' }} />\r\n                        </div>\r\n                        <div>\r\n                            <h2 style={{ fontSize: 18, fontWeight: 700, marginBottom: 6 }}>You're All Set</h2>\r\n                            <p style={{ fontSize: 13, color: 'var(--text-1)' }}>\r\n                                Nexus is ready. The system will begin fetching market data and training models.\r\n                            </p>\r\n                        </div>\r\n                        <button className=\"btn btn-primary\" onClick={finish}>Launch Dashboard</button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nF:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx:98:9\n   96 |\n   97 |     useEffect(() => {\n>  98 |         fetchState();\n      |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n   99 |         intervalRef.current = setInterval(fetchState, 5000);\n  100 |         return () => { if (intervalRef.current) clearInterval(intervalRef.current); };\n  101 |     }, [fetchState]);","line":98,"column":9,"nodeType":null,"endLine":98,"endColumn":19},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nF:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx:262:22\n  260 |                 </div>\n  261 |                 <div className=\"gpu-chart-row\">\n> 262 |                     <Sparkline data={state.ass_price_history} />\n      |                      ^^^^^^^^^ This component is created during render\n  263 |                 </div>\n  264 |             </div>\n  265 |\n\nF:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx:159:23\n  157 |\n  158 |     // ÔöÇÔöÇÔöÇ Price sparkline (simple SVG) ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\n> 159 |     const Sparkline = ({ data }: { data: { ts: number; price: number }[] }) => {\n      |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 160 |         if (data.length < 2) return null;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 161 |         const prices = data.map(d => d.price);\n      ÔÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 174 |         );\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 175 |     };\n      | ^^^^^^ The component is created during render here\n  176 |\n  177 |     // ÔöÇÔöÇÔöÇ Merge progress bar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\n  178 |     const MergeProgress = () => {","line":262,"column":22,"nodeType":null,"endLine":262,"endColumn":31},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nF:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx:312:14\n  310 |\n  311 |             {/* ÔöÇÔöÇÔöÇ Auto-Merge Progress ÔöÇÔöÇÔöÇ */}\n> 312 |             <MergeProgress />\n      |              ^^^^^^^^^^^^^ This component is created during render\n  313 |\n  314 |             {/* ÔöÇÔöÇÔöÇ GPU Card Grid ÔöÇÔöÇÔöÇ */}\n  315 |             <div className=\"gpu-grid-header\">\n\nF:\\Predictor\\desktop\\src\\pages\\GpuFarm.tsx:178:27\n  176 |\n  177 |     // ÔöÇÔöÇÔöÇ Merge progress bar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\n> 178 |     const MergeProgress = () => {\n      |                           ^^^^^^^\n> 179 |         const tiers = state?.tier_counts;\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 180 |         if (!tiers) return null;\n      ÔÇª\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 220 |         );\n      | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 221 |     };\n      | ^^^^^^ The component is created during render here\n  222 |\n  223 |     if (!state) return (\n  224 |         <div className=\"page gpu-page\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100%' }}>","line":312,"column":14,"nodeType":null,"endLine":312,"endColumn":27}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * GpuFarm ÔÇö AssGPU Mini-Game Tab\r\n * ==============================\r\n * Buy GPUs and mine ASS coin. Cards auto-merge when thresholds are met.\r\n * 4x Tier1ÔåÆTier2, 2x Tier2ÔåÆTier3, 2x Tier3ÔåÆTier4, 2x Tier4ÔåÆTier5\r\n */\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\nconst API = 'http://127.0.0.1:8420';\r\n\r\n// ÔöÇÔöÇÔöÇ Types ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\ninterface GpuCard {\r\n    id: number;\r\n    tier: number;\r\n    name: string;\r\n    label: string;\r\n    color: string;\r\n    mining_rate: number;\r\n    created_ts: string;\r\n}\r\n\r\ninterface TierInfo {\r\n    name: string;\r\n    label: string;\r\n    color: string;\r\n    base_cost: number;\r\n    mining_rate: number;\r\n}\r\n\r\ninterface TierCount {\r\n    count: number;\r\n    merge_threshold: number | null;\r\n    merge_progress: string;\r\n}\r\n\r\ninterface GameState {\r\n    game_balance_usd: number;\r\n    ass_balance: number;\r\n    ass_price: number;\r\n    ass_value_usd: number;\r\n    cards: GpuCard[];\r\n    card_cost: number;\r\n    total_mining_rate: number;\r\n    total_transferred: number;\r\n    total_mined: number;\r\n    total_sold_ass: number;\r\n    ass_price_history: { ts: number; price: number }[];\r\n    gpu_tiers: Record<string, TierInfo>;\r\n    tier_counts?: Record<string, TierCount>;\r\n    merge_thresholds?: Record<string, number>;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Tier visual config ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nconst TIER_GLOW: Record<number, string> = {\r\n    1: '0 0 20px rgba(0,230,118,0.4)',\r\n    2: '0 0 20px rgba(41,121,255,0.4)',\r\n    3: '0 0 25px rgba(170,0,255,0.4)',\r\n    4: '0 0 30px rgba(255,145,0,0.5)',\r\n    5: '0 0 40px rgba(255,23,68,0.6), 0 0 80px rgba(255,215,0,0.3)',\r\n};\r\n\r\nconst TIER_BG: Record<number, string> = {\r\n    1: 'linear-gradient(135deg, #0d2818 0%, #1a3a2a 100%)',\r\n    2: 'linear-gradient(135deg, #0d1528 0%, #1a2a3a 100%)',\r\n    3: 'linear-gradient(135deg, #1a0d28 0%, #2a1a3a 100%)',\r\n    4: 'linear-gradient(135deg, #281a0d 0%, #3a2a1a 100%)',\r\n    5: 'linear-gradient(135deg, #280d0d 0%, #3a1a1a 100%)',\r\n};\r\n\r\nconst TIER_COLORS: Record<number, string> = {\r\n    1: '#00E676', 2: '#2979FF', 3: '#AA00FF', 4: '#FF9100', 5: '#FF1744',\r\n};\r\n\r\nconst MERGE_THRESHOLDS: Record<number, number> = {\r\n    1: 4, 2: 2, 3: 2, 4: 2,\r\n};\r\n\r\nexport default function GpuFarm() {\r\n    const [state, setState] = useState<GameState | null>(null);\r\n    const [transferAmt, setTransferAmt] = useState('');\r\n    const [sellAmt, setSellAmt] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null);\r\n\r\n    // ÔöÇÔöÇÔöÇ Fetch game state ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const fetchState = useCallback(async () => {\r\n        try {\r\n            const res = await fetch(`${API}/api/game/state`);\r\n            if (res.ok) {\r\n                const data = await res.json();\r\n                setState(data);\r\n            }\r\n        } catch { /* backend not ready */ }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchState();\r\n        intervalRef.current = setInterval(fetchState, 5000);\r\n        return () => { if (intervalRef.current) clearInterval(intervalRef.current); };\r\n    }, [fetchState]);\r\n\r\n    // ÔöÇÔöÇÔöÇ Feedback helpers ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const flash = (msg: string, type: 'ok' | 'err') => {\r\n        if (type === 'ok') { setSuccess(msg); setError(''); }\r\n        else { setError(msg); setSuccess(''); }\r\n        setTimeout(() => { setSuccess(''); setError(''); }, 3000);\r\n    };\r\n\r\n    // ÔöÇÔöÇÔöÇ Actions ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const doTransfer = async () => {\r\n        const amt = parseFloat(transferAmt);\r\n        if (!amt || amt <= 0) return flash('Enter a valid amount', 'err');\r\n        try {\r\n            const res = await fetch(`${API}/api/game/transfer`, {\r\n                method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ amount: amt }),\r\n            });\r\n            if (!res.ok) { const d = await res.json(); return flash(d.detail || 'Transfer failed', 'err'); }\r\n            flash(`Transferred $${amt.toFixed(2)} to game wallet`, 'ok');\r\n            setTransferAmt('');\r\n            fetchState();\r\n        } catch { flash('Transfer failed', 'err'); }\r\n    };\r\n\r\n    const doBuy = async () => {\r\n        try {\r\n            const res = await fetch(`${API}/api/game/buy-card`, {\r\n                method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n            });\r\n            if (!res.ok) { const d = await res.json(); return flash(d.detail || 'Buy failed', 'err'); }\r\n            const data = await res.json();\r\n            const mergeCount = data.merges?.length || 0;\r\n            const msg = mergeCount > 0\r\n                ? `Bought 10s for $${data.cost?.toFixed(2)} ÔÇö ${mergeCount} auto-merge${mergeCount > 1 ? 's' : ''} ­ƒöÑ`\r\n                : `Bought 10 Series card for $${data.cost?.toFixed(2)}`;\r\n            flash(msg, 'ok');\r\n            fetchState();\r\n        } catch { flash('Buy failed', 'err'); }\r\n    };\r\n\r\n    const doSellAss = async () => {\r\n        const amt = parseFloat(sellAmt);\r\n        if (!amt || amt <= 0) return flash('Enter a valid amount', 'err');\r\n        try {\r\n            const res = await fetch(`${API}/api/game/sell-ass`, {\r\n                method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ amount: amt }),\r\n            });\r\n            if (!res.ok) { const d = await res.json(); return flash(d.detail || 'Sell failed', 'err'); }\r\n            const data = await res.json();\r\n            flash(`Sold ${data.amount_sold} ASS for $${data.usd_received?.toFixed(2)}`, 'ok');\r\n            setSellAmt('');\r\n            fetchState();\r\n        } catch { flash('Sell failed', 'err'); }\r\n    };\r\n\r\n    // ÔöÇÔöÇÔöÇ Price sparkline (simple SVG) ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const Sparkline = ({ data }: { data: { ts: number; price: number }[] }) => {\r\n        if (data.length < 2) return null;\r\n        const prices = data.map(d => d.price);\r\n        const min = Math.min(...prices);\r\n        const max = Math.max(...prices);\r\n        const range = max - min || 1;\r\n        const w = 240, h = 60;\r\n        const points = prices.map((p, i) =>\r\n            `${(i / (prices.length - 1)) * w},${h - ((p - min) / range) * h}`\r\n        ).join(' ');\r\n        const trending = prices[prices.length - 1] >= prices[0];\r\n        return (\r\n            <svg width={w} height={h} style={{ opacity: 0.9 }}>\r\n                <polyline fill=\"none\" stroke={trending ? '#00E676' : '#FF1744'} strokeWidth=\"2\" points={points} />\r\n            </svg>\r\n        );\r\n    };\r\n\r\n    // ÔöÇÔöÇÔöÇ Merge progress bar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n    const MergeProgress = () => {\r\n        const tiers = state?.tier_counts;\r\n        if (!tiers) return null;\r\n\r\n        return (\r\n            <div className=\"gpu-merge-progress\">\r\n                <h3 style={{ margin: '0 0 10px', fontSize: 14, opacity: 0.7 }}>Auto-Merge Progress</h3>\r\n                <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n                    {[1, 2, 3, 4].map(tier => {\r\n                        const info = tiers[String(tier)];\r\n                        if (!info) return null;\r\n                        const threshold = info.merge_threshold || MERGE_THRESHOLDS[tier] || 2;\r\n                        const count = info.count;\r\n                        const pct = Math.min((count / threshold) * 100, 100);\r\n                        const tierName = state?.gpu_tiers?.[String(tier)]?.label || `T${tier}`;\r\n                        const nextName = state?.gpu_tiers?.[String(tier + 1)]?.label || `T${tier + 1}`;\r\n                        const color = TIER_COLORS[tier + 1] || '#888';\r\n                        return (\r\n                            <div key={tier} style={{\r\n                                flex: '1 1 120px', background: 'rgba(255,255,255,0.03)',\r\n                                borderRadius: 8, padding: '8px 12px', border: '1px solid rgba(255,255,255,0.06)',\r\n                            }}>\r\n                                <div style={{ fontSize: 11, opacity: 0.6, marginBottom: 4 }}>\r\n                                    {threshold}├ù {tierName} ÔåÆ {nextName}\r\n                                </div>\r\n                                <div style={{\r\n                                    height: 6, background: 'rgba(255,255,255,0.08)', borderRadius: 3,\r\n                                    overflow: 'hidden', marginBottom: 3,\r\n                                }}>\r\n                                    <div style={{\r\n                                        width: `${pct}%`, height: '100%', background: color,\r\n                                        borderRadius: 3, transition: 'width 0.3s ease',\r\n                                    }} />\r\n                                </div>\r\n                                <div style={{ fontSize: 12, fontWeight: 600, color }}>\r\n                                    {count}/{threshold}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (!state) return (\r\n        <div className=\"page gpu-page\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100%' }}>\r\n            <div style={{ textAlign: 'center', opacity: 0.5 }}>\r\n                <div className=\"spinner\" />\r\n                <p style={{ marginTop: 12 }}>Loading GPU Farm...</p>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"page gpu-page\">\r\n            {/* ÔöÇÔöÇÔöÇ Feedback toasts ÔöÇÔöÇÔöÇ */}\r\n            {error && <div className=\"gpu-toast gpu-toast-err\">{error}</div>}\r\n            {success && <div className=\"gpu-toast gpu-toast-ok\">{success}</div>}\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Header Stats ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"gpu-header\">\r\n                <div className=\"gpu-stat-row\">\r\n                    <div className=\"gpu-stat\">\r\n                        <span className=\"gpu-stat-label\">Game Balance</span>\r\n                        <span className=\"gpu-stat-value\">${state.game_balance_usd.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"gpu-stat\">\r\n                        <span className=\"gpu-stat-label\">ASS Balance</span>\r\n                        <span className=\"gpu-stat-value\">{state.ass_balance.toFixed(4)} ASS</span>\r\n                        <span className=\"gpu-stat-sub\">Ôëê ${state.ass_value_usd.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"gpu-stat\">\r\n                        <span className=\"gpu-stat-label\">ASS Price</span>\r\n                        <span className=\"gpu-stat-value\" style={{ color: state.ass_price >= 7 ? '#00E676' : '#FF9100' }}>\r\n                            ${state.ass_price.toFixed(2)}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"gpu-stat\">\r\n                        <span className=\"gpu-stat-label\">Mining Rate</span>\r\n                        <span className=\"gpu-stat-value\">{state.total_mining_rate.toFixed(1)} ASS/hr</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"gpu-chart-row\">\r\n                    <Sparkline data={state.ass_price_history} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Action Panels ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"gpu-actions\">\r\n                {/* Transfer */}\r\n                <div className=\"gpu-action-panel\">\r\n                    <h3>­ƒÆ░ Transfer to Game</h3>\r\n                    <p className=\"gpu-action-desc\">One-way transfer from trading wallet</p>\r\n                    <div className=\"gpu-input-row\">\r\n                        <span className=\"gpu-input-prefix\">$</span>\r\n                        <input\r\n                            type=\"number\" placeholder=\"Amount\" value={transferAmt}\r\n                            onChange={e => setTransferAmt(e.target.value)}\r\n                            className=\"gpu-input\"\r\n                        />\r\n                        <button onClick={doTransfer} className=\"gpu-btn gpu-btn-transfer\">Transfer</button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Buy */}\r\n                <div className=\"gpu-action-panel\">\r\n                    <h3>­ƒøÆ Buy 10 Series</h3>\r\n                    <p className=\"gpu-action-desc\">Current price: <strong>${state.card_cost.toFixed(2)}</strong></p>\r\n                    <button onClick={doBuy} className=\"gpu-btn gpu-btn-buy\" disabled={state.game_balance_usd < state.card_cost}>\r\n                        Buy AssGPU 10s\r\n                    </button>\r\n                    <p className=\"gpu-action-desc\" style={{ marginTop: 6, fontSize: 11, opacity: 0.5 }}>\r\n                        Cards auto-merge: 4├ù 10sÔåÆ20s, 2├ù 20sÔåÆ30s, 2├ù 30sÔåÆ40s, 2├ù 40sÔåÆ50s\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Sell ASS */}\r\n                <div className=\"gpu-action-panel\">\r\n                    <h3>­ƒôê Sell ASS Coin</h3>\r\n                    <p className=\"gpu-action-desc\">Current rate: ${state.ass_price.toFixed(2)}/ASS</p>\r\n                    <div className=\"gpu-input-row\">\r\n                        <input\r\n                            type=\"number\" placeholder=\"Amount\" value={sellAmt}\r\n                            onChange={e => setSellAmt(e.target.value)}\r\n                            className=\"gpu-input\"\r\n                        />\r\n                        <button onClick={() => setSellAmt(state.ass_balance.toFixed(4))} className=\"gpu-btn-max\">MAX</button>\r\n                        <button onClick={doSellAss} className=\"gpu-btn gpu-btn-sell\" disabled={state.ass_balance <= 0}>Sell</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Auto-Merge Progress ÔöÇÔöÇÔöÇ */}\r\n            <MergeProgress />\r\n\r\n            {/* ÔöÇÔöÇÔöÇ GPU Card Grid ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"gpu-grid-header\">\r\n                <h2>Your GPU Farm</h2>\r\n                <span className=\"gpu-grid-count\">{state.cards.length} card{state.cards.length !== 1 ? 's' : ''}</span>\r\n            </div>\r\n\r\n            {state.cards.length === 0 ? (\r\n                <div className=\"gpu-empty\">\r\n                    <p>No GPU cards yet. Transfer funds and buy your first 10 Series!</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"gpu-grid\">\r\n                    {state.cards\r\n                        .sort((a, b) => b.tier - a.tier || a.id - b.id)\r\n                        .map(card => (\r\n                            <div\r\n                                key={card.id}\r\n                                className=\"gpu-card\"\r\n                                style={{\r\n                                    background: TIER_BG[card.tier] || '#111',\r\n                                    borderColor: card.color,\r\n                                    boxShadow: TIER_GLOW[card.tier],\r\n                                }}\r\n                            >\r\n                                <div className=\"gpu-card-tier\" style={{ color: card.color }}>\r\n                                    {card.label}\r\n                                </div>\r\n                                <div className=\"gpu-card-name\">{card.name}</div>\r\n                                <div className=\"gpu-card-chip\" style={{ background: card.color }} />\r\n                                <div className=\"gpu-card-rate\">\r\n                                    ÔøÅ {card.mining_rate} ASS/hr\r\n                                </div>\r\n                                <div className=\"gpu-card-id\">#{card.id}</div>\r\n                            </div>\r\n                        ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Stats Footer ÔöÇÔöÇÔöÇ */}\r\n            <div className=\"gpu-footer\">\r\n                <span>Total Transferred: ${state.total_transferred.toFixed(2)}</span>\r\n                <span>Total Mined: {state.total_mined.toFixed(2)} ASS</span>\r\n                <span>Total Sold: {state.total_sold_ass.toFixed(2)} ASS</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\NexusAgent.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1629,1632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1629,1632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5230,5233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5230,5233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10503,10506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10503,10506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadHistory'. Either include it or remove the dependency array.","line":140,"column":8,"nodeType":"ArrayExpression","endLine":140,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadHistory]","fix":{"range":[6194,6196],"text":"[loadHistory]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect, useCallback, type FormEvent } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport { IconSend, IconPlus, IconTrash, IconChatBubble, IconChevronLeft, IconTrend, IconTrendDown } from '../components/Icons';\r\nimport { useLivePrice, useLiveChangePct, useLivePrediction, useLivePositions } from '../stores/liveStore';\r\n\r\nconst API = 'http://127.0.0.1:8420';\r\n\r\n/* ÔöÇÔöÇ Types ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\ntype Message = { role: 'user' | 'agent'; content: string; provider?: string };\r\ntype Session = {\r\n    session_id: string;\r\n    title: string;\r\n    message_count: number;\r\n    started_at: string;\r\n    last_message_at: string;\r\n};\r\n\r\n/* ÔöÇÔöÇ Helpers ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction relativeTime(iso: string): string {\r\n    if (!iso) return '';\r\n    const d = new Date(iso + 'Z');\r\n    const diff = (Date.now() - d.getTime()) / 1000;\r\n    if (diff < 60) return 'just now';\r\n    if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;\r\n    if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;\r\n    return `${Math.floor(diff / 86400)}d ago`;\r\n}\r\n\r\n/* ÔöÇÔöÇ Market Ticker Component ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nfunction MarketTicker() {\r\n    const price = useLivePrice();\r\n    const changePct = useLiveChangePct();\r\n    const prediction = useLivePrediction();\r\n    const positions = useLivePositions();\r\n\r\n    const pctStr = changePct != null ? `${changePct >= 0 ? '+' : ''}${changePct.toFixed(2)}%` : '--';\r\n    const pctClass = (changePct ?? 0) >= 0 ? 'up' : 'down';\r\n    const predDir = (prediction as any)?.direction ?? null;\r\n    const predConf = (prediction as any)?.confidence ?? null;\r\n    const openPos = positions?.length ?? 0;\r\n\r\n    return (\r\n        <div className=\"market-ticker\">\r\n            <div className=\"ticker-item\">\r\n                <span className=\"ticker-label\">BTC/USDT</span>\r\n                <span className=\"ticker-value\" style={{ fontVariantNumeric: 'tabular-nums' }}>\r\n                    ${price != null ? price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : 'ÔÇö'}\r\n                </span>\r\n            </div>\r\n            <div className=\"ticker-divider\" />\r\n            <div className=\"ticker-item\">\r\n                <span className=\"ticker-label\">24h</span>\r\n                <span className={`ticker-value ${pctClass}`}>{pctStr}</span>\r\n            </div>\r\n            <div className=\"ticker-divider\" />\r\n            <div className=\"ticker-item\">\r\n                <span className=\"ticker-label\">Signal</span>\r\n                {predDir ? (\r\n                    <span className={`ticker-value ${predDir === 'LONG' ? 'up' : 'down'}`} style={{ display: 'flex', alignItems: 'center', gap: 3 }}>\r\n                        {predDir === 'LONG' ? <IconTrend size={13} /> : <IconTrendDown size={13} />}\r\n                        {predDir} {predConf != null ? `${Number(predConf).toFixed(2)}%` : ''}\r\n                    </span>\r\n                ) : <span className=\"ticker-value muted\">ÔÇö</span>}\r\n            </div>\r\n            <div className=\"ticker-divider\" />\r\n            <div className=\"ticker-item\">\r\n                <span className=\"ticker-label\">Positions</span>\r\n                <span className={`ticker-value ${openPos > 0 ? 'up' : 'muted'}`}>{openPos}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n/* ÔöÇÔöÇ Main Component ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\nexport default function NexusAgent() {\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [input, setInput] = useState('');\r\n    const [streaming, setStreaming] = useState(false);\r\n    const [sessionId, setSessionId] = useState<string | null>(null);\r\n    const [sessions, setSessions] = useState<Session[]>([]);\r\n    const [sidebarOpen, setSidebarOpen] = useState(true);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const inputRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n    const scrollToBottom = useCallback(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, []);\r\n    useEffect(scrollToBottom, [messages, scrollToBottom]);\r\n\r\n    /* ÔöÇÔöÇ Load sessions list ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const loadSessions = useCallback(async () => {\r\n        try {\r\n            const res = await fetch(`${API}/api/agent/sessions`);\r\n            if (!res.ok) return;\r\n            const data = await res.json();\r\n            setSessions(data.sessions ?? []);\r\n            if (!sessionId && data.current_session_id) {\r\n                setSessionId(data.current_session_id);\r\n            }\r\n        } catch { /* backend not ready */ }\r\n    }, [sessionId]);\r\n\r\n    /* ÔöÇÔöÇ Load messages for a given session ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const loadHistory = useCallback(async (sid: string | null) => {\r\n        try {\r\n            const url = sid\r\n                ? `${API}/api/agent/history?session_id=${sid}&limit=50`\r\n                : `${API}/api/agent/history?limit=50`;\r\n            const res = await fetch(url);\r\n            if (!res.ok) return;\r\n            const data = await res.json();\r\n            if (data.messages && data.messages.length > 0) {\r\n                const history: Message[] = data.messages.map((m: any) => ({\r\n                    role: m.role === 'user' ? 'user' as const : 'agent' as const,\r\n                    content: m.content ?? m.text ?? '',\r\n                }));\r\n                setMessages(history);\r\n            } else {\r\n                setMessages([]);\r\n            }\r\n        } catch { /* backend not ready */ }\r\n    }, []);\r\n\r\n    /* ÔöÇÔöÇ Initial mount ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    useEffect(() => {\r\n        (async () => {\r\n            // Fetch sessions and current session\r\n            const res = await fetch(`${API}/api/agent/sessions`).catch(() => null);\r\n            if (!res || !res.ok) return;\r\n            const data = await res.json();\r\n            setSessions(data.sessions ?? []);\r\n            const sid = data.current_session_id;\r\n            if (sid) {\r\n                setSessionId(sid);\r\n                loadHistory(sid);\r\n            }\r\n        })();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    /* ÔöÇÔöÇ New Chat ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const startNewChat = useCallback(async () => {\r\n        try {\r\n            const res = await fetch(`${API}/api/agent/new-session`, { method: 'POST' });\r\n            if (!res.ok) return;\r\n            const data = await res.json();\r\n            setSessionId(data.session_id);\r\n            setMessages([]);\r\n            inputRef.current?.focus();\r\n            loadSessions();\r\n        } catch { /* */ }\r\n    }, [loadSessions]);\r\n\r\n    /* ÔöÇÔöÇ Switch Session ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const switchSession = useCallback(async (sid: string) => {\r\n        setSessionId(sid);\r\n        await loadHistory(sid);\r\n    }, [loadHistory]);\r\n\r\n    /* ÔöÇÔöÇ Delete Session ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const deleteSession = useCallback(async (sid: string, e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        try {\r\n            await fetch(`${API}/api/agent/sessions/${sid}`, { method: 'DELETE' });\r\n            setSessions(prev => prev.filter(s => s.session_id !== sid));\r\n            if (sessionId === sid) {\r\n                // Deleted active session ÔÇö start new one\r\n                startNewChat();\r\n            }\r\n        } catch { /* */ }\r\n    }, [sessionId, startNewChat]);\r\n\r\n    /* ÔöÇÔöÇ Send Message ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const sendMessage = useCallback(async (e?: FormEvent) => {\r\n        e?.preventDefault();\r\n        const text = input.trim();\r\n        if (!text || streaming) return;\r\n\r\n        setInput('');\r\n        setMessages(prev => [...prev, { role: 'user', content: text }]);\r\n        setStreaming(true);\r\n\r\n        try {\r\n            const res = await fetch(`${API}/api/agent/chat`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ message: text, session_id: sessionId }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n\r\n            const contentType = res.headers.get('content-type') ?? '';\r\n            if (contentType.includes('text/event-stream') || contentType.includes('text/plain')) {\r\n                const reader = res.body?.getReader();\r\n                const decoder = new TextDecoder();\r\n                let agentText = '';\r\n                let providerLabel = '';\r\n                setMessages(prev => [...prev, { role: 'agent', content: '' }]);\r\n\r\n                if (reader) {\r\n                    while (true) {\r\n                        const { done, value } = await reader.read();\r\n                        if (done) break;\r\n                        const chunk = decoder.decode(value, { stream: true });\r\n                        const lines = chunk.split('\\n');\r\n                        for (const line of lines) {\r\n                            if (line.startsWith('data: ')) {\r\n                                const data = line.slice(6);\r\n                                if (data === '[DONE]') continue;\r\n                                try {\r\n                                    const parsed = JSON.parse(data);\r\n                                    if (parsed.meta?.provider) {\r\n                                        providerLabel = parsed.meta.provider;\r\n                                    } else {\r\n                                        agentText += parsed.content ?? parsed.text ?? '';\r\n                                    }\r\n                                } catch {\r\n                                    agentText += data;\r\n                                }\r\n                            }\r\n                        }\r\n                        setMessages(prev => {\r\n                            const copy = [...prev];\r\n                            copy[copy.length - 1] = { role: 'agent', content: agentText, provider: providerLabel || undefined };\r\n                            return copy;\r\n                        });\r\n                    }\r\n                }\r\n            } else {\r\n                const data = await res.json();\r\n                const reply = data.reply ?? data.response ?? data.message ?? 'No response';\r\n                setMessages(prev => [...prev, { role: 'agent', content: reply }]);\r\n            }\r\n\r\n            // Refresh sessions list (title may have changed)\r\n            loadSessions();\r\n        } catch (err: any) {\r\n            setMessages(prev => [...prev, { role: 'agent', content: `Error: ${err.message}` }]);\r\n        } finally {\r\n            setStreaming(false);\r\n            inputRef.current?.focus();\r\n        }\r\n    }, [input, streaming, sessionId, loadSessions]);\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            sendMessage();\r\n        }\r\n    };\r\n\r\n    /* ÔöÇÔöÇ Rich markdown rendering ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */\r\n    const renderContent = (content: string) => {\r\n        return (\r\n            <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n                {content}\r\n            </ReactMarkdown>\r\n        );\r\n    };\r\n\r\n    const quickActions = [\r\n        'What is the current market regime?',\r\n        'Explain the latest prediction',\r\n        'Show quant analysis summary',\r\n        'What are the risk levels?',\r\n    ];\r\n\r\n    return (\r\n        <div className=\"nexus-chat-layout\">\r\n            {/* ÔöÇÔöÇ Sidebar ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className={`chat-sidebar ${sidebarOpen ? 'open' : 'collapsed'}`}>\r\n                <div className=\"sidebar-header\">\r\n                    <button className=\"btn btn-primary sidebar-new-chat\" onClick={startNewChat} title=\"New Chat\">\r\n                        <IconPlus size={15} />\r\n                        {sidebarOpen && <span>New Chat</span>}\r\n                    </button>\r\n                    <button className=\"btn btn-ghost sidebar-toggle\" onClick={() => setSidebarOpen(p => !p)} title={sidebarOpen ? 'Collapse' : 'Expand'}>\r\n                        <IconChevronLeft size={16} style={{ transform: sidebarOpen ? undefined : 'rotate(180deg)', transition: 'transform .2s' }} />\r\n                    </button>\r\n                </div>\r\n                {sidebarOpen && (\r\n                    <div className=\"sidebar-sessions\">\r\n                        {sessions.length === 0 && (\r\n                            <div className=\"sidebar-empty\">No conversations yet</div>\r\n                        )}\r\n                        {sessions.map(s => (\r\n                            <div\r\n                                key={s.session_id}\r\n                                className={`session-item ${s.session_id === sessionId ? 'active' : ''}`}\r\n                                onClick={() => switchSession(s.session_id)}\r\n                            >\r\n                                <IconChatBubble size={14} style={{ flexShrink: 0, opacity: 0.5 }} />\r\n                                <div className=\"session-info\">\r\n                                    <div className=\"session-title\">{s.title}</div>\r\n                                    <div className=\"session-meta\">{s.message_count} msgs ┬À {relativeTime(s.last_message_at)}</div>\r\n                                </div>\r\n                                <button\r\n                                    className=\"session-delete\"\r\n                                    onClick={(e) => deleteSession(s.session_id, e)}\r\n                                    title=\"Delete\"\r\n                                >\r\n                                    <IconTrash size={13} />\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇ Main Chat Area ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className=\"chat-main\">\r\n                {/* Market Ticker */}\r\n                <MarketTicker />\r\n\r\n                {/* Messages */}\r\n                <div className=\"chat-messages\">\r\n                    {messages.length === 0 && (\r\n                        <div className=\"empty-state\" style={{ flex: 1 }}>\r\n                            <div style={{ fontSize: 16, fontWeight: 600, color: 'var(--text-1)', marginBottom: 4 }}>Dr. Nexus</div>\r\n                            <div style={{ fontSize: 12, maxWidth: 300 }}>\r\n                                Ask me anything about market conditions, predictions, or trading strategies.\r\n                            </div>\r\n                            <div className=\"flex gap-8\" style={{ marginTop: 16, flexWrap: 'wrap', justifyContent: 'center' }}>\r\n                                {quickActions.map(q => (\r\n                                    <button key={q} className=\"btn btn-sm\" onClick={() => { setInput(q); inputRef.current?.focus(); }}>\r\n                                        {q}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    {messages.map((msg, i) => (\r\n                        <div key={i} className={`chat-bubble ${msg.role} animate-in`}>\r\n                            {msg.role === 'agent' ? (\r\n                                <div className=\"nexus-md\">{renderContent(msg.content)}</div>\r\n                            ) : msg.content}\r\n                            {msg.role === 'agent' && msg.provider && (\r\n                                <div className=\"provider-badge\">via {msg.provider}</div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                    {streaming && messages.length > 0 && messages[messages.length - 1].content === '' && (\r\n                        <div className=\"chat-bubble agent\">\r\n                            <div className=\"typing-dots\"><span /><span /><span /></div>\r\n                        </div>\r\n                    )}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                {/* Input */}\r\n                <div className=\"chat-input-row\">\r\n                    <textarea\r\n                        ref={inputRef}\r\n                        className=\"chat-input\"\r\n                        placeholder=\"Ask Dr. NexusÔÇª\"\r\n                        value={input}\r\n                        onChange={e => setInput(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                        rows={1}\r\n                    />\r\n                    <button className=\"btn btn-primary\" onClick={() => sendMessage()} disabled={streaming || !input.trim()}>\r\n                        <IconSend style={{ width: 16, height: 16 }} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\PaperTrading.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[714,717],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[714,717],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[773,776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[773,776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1168,1171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1168,1171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useLiveBotStatus, useLivePositions, useLiveStats } from '../stores/liveStore';\r\nimport { useApi, apiPost } from '../hooks/useApi';\r\nimport { useState } from 'react';\r\nimport { IconPlay, IconStop, IconRefresh, IconArrowUp, IconArrowDown } from '../components/Icons';\r\nimport { toast } from '../stores/toastStore';\r\n\r\ntype Trade = {\r\n    id?: number;\r\n    direction: string;\r\n    entry_price: number;\r\n    exit_price?: number;\r\n    pnl?: number;\r\n    pnl_usd?: number;\r\n    pnl_pct?: number;\r\n    timestamp?: string;\r\n    exit_time?: string;\r\n    close_reason?: string;\r\n};\r\n\r\nexport default function PaperTrading() {\r\n    const botRunning = useLiveBotStatus();\r\n    const positions = useLivePositions() as any[];\r\n    const stats = useLiveStats() as Record<string, any> | null;\r\n    const { data: history } = useApi<{ trades: Trade[] }>('/api/paper/trades', 10_000);\r\n    const trades = history?.trades ?? [];\r\n    const [busy, setBusy] = useState(false);\r\n\r\n    const act = async (action: string) => {\r\n        setBusy(true);\r\n        try {\r\n            await apiPost(`/api/paper/${action}`);\r\n            toast.success(`Bot ${action}`);\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        } finally {\r\n            setBusy(false);\r\n        }\r\n    };\r\n\r\n    const fmtMoney = (v: number) => `$${v.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n    const fmtPct = (v: number) => `${v >= 0 ? '+' : ''}${v.toFixed(2)}%`;\r\n\r\n    // Stats\r\n    const balance = stats?.balance ?? 10000;\r\n    const available = stats?.available_balance ?? balance;\r\n    const marginInUse = stats?.margin_in_use ?? 0;\r\n    const totalPnl = stats?.total_pnl ?? 0;\r\n    const unrealizedPnl = stats?.unrealized_pnl ?? 0;\r\n    const winRate = stats?.win_rate ?? 0;\r\n    const sharpe = stats?.sharpe_ratio ?? 0;\r\n    const maxDD = stats?.max_drawdown_pct ?? 0;\r\n    const profitFactor = stats?.profit_factor ?? 0;\r\n    const totalTrades = stats?.total_trades ?? 0;\r\n    const totalFees = stats?.total_fees ?? 0;\r\n    const kelly = stats?.kelly_fraction ?? 0.02;\r\n    const leverage = stats?.leverage ?? 10;\r\n    const posCount = stats?.positions_count ?? positions.length;\r\n    const maxConcurrent = stats?.max_concurrent ?? 3;\r\n\r\n    return (\r\n        <div className=\"flex-col gap-10\">\r\n            {/* ÔöÇÔöÇÔöÇ Capital Management Header ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className=\"card card-compact animate-in\">\r\n                {/* Row 1: Controls + Balance Breakdown */}\r\n                <div className=\"trading-controls\" style={{ flexWrap: 'wrap', gap: 8 }}>\r\n                    {!botRunning ? (\r\n                        <button className=\"btn btn-success btn-sm\" onClick={() => act('start')} disabled={busy}>\r\n                            <IconPlay style={{ width: 12, height: 12 }} /> Start\r\n                        </button>\r\n                    ) : (\r\n                        <button className=\"btn btn-danger btn-sm\" onClick={() => act('stop')} disabled={busy}>\r\n                            <IconStop style={{ width: 12, height: 12 }} /> Stop\r\n                        </button>\r\n                    )}\r\n                    <button className=\"btn btn-sm\" onClick={() => act('reset')} disabled={busy}>\r\n                        <IconRefresh style={{ width: 12, height: 12 }} /> Reset\r\n                    </button>\r\n\r\n                    <div style={{ flex: 1 }} />\r\n\r\n                    {/* Capital Breakdown Pills */}\r\n                    <div style={{ display: 'flex', gap: 6, alignItems: 'center', flexWrap: 'wrap' }}>\r\n                        <div style={{\r\n                            display: 'flex', gap: 2, alignItems: 'center',\r\n                            background: 'rgba(255,255,255,0.04)', borderRadius: 8, padding: '4px 10px',\r\n                            fontSize: 11, color: 'var(--text-2)'\r\n                        }}>\r\n                            <span>Available</span>\r\n                            <span className=\"mono\" style={{ color: 'var(--text-1)', fontWeight: 600, marginLeft: 4 }}>\r\n                                {fmtMoney(available)}\r\n                            </span>\r\n                        </div>\r\n                        <div style={{\r\n                            display: 'flex', gap: 2, alignItems: 'center',\r\n                            background: marginInUse > 0 ? 'rgba(59,130,246,0.08)' : 'rgba(255,255,255,0.04)',\r\n                            borderRadius: 8, padding: '4px 10px', fontSize: 11, color: 'var(--text-2)'\r\n                        }}>\r\n                            <span>In Trade</span>\r\n                            <span className=\"mono\" style={{\r\n                                color: marginInUse > 0 ? 'var(--blue)' : 'var(--text-2)',\r\n                                fontWeight: 600, marginLeft: 4\r\n                            }}>\r\n                                {fmtMoney(marginInUse)}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"balance-pill\">{fmtMoney(balance)}</div>\r\n                    </div>\r\n\r\n                    <span className={`badge ${botRunning ? 'badge-long' : 'badge-neutral'}`}>\r\n                        {botRunning ? 'LIVE' : 'IDLE'}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Row 2: Config bar */}\r\n                <div style={{\r\n                    display: 'flex', gap: 16, padding: '6px 12px 4px',\r\n                    fontSize: 11, color: 'var(--text-3)', borderTop: '1px solid rgba(255,255,255,0.04)'\r\n                }}>\r\n                    <span>Leverage: <span className=\"mono\" style={{ color: 'var(--text-2)' }}>{leverage}x</span></span>\r\n                    <span>Kelly: <span className=\"mono\" style={{ color: 'var(--text-2)' }}>{(kelly * 100).toFixed(1)}%</span></span>\r\n                    <span>Slots: <span className=\"mono\" style={{ color: 'var(--text-2)' }}>{posCount} / {maxConcurrent}</span></span>\r\n                    <span>Fees Paid: <span className=\"mono\" style={{ color: 'var(--text-2)' }}>{fmtMoney(totalFees)}</span></span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Stats Grid (2x4) ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className=\"grid grid-4 stagger\">\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Realized P&L</div>\r\n                    <div className={`stat-value sm mono ${totalPnl >= 0 ? 'text-positive' : 'text-negative'}`}>\r\n                        {fmtMoney(totalPnl)}\r\n                    </div>\r\n                    <div className=\"stat-sub\">{totalTrades} trades</div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Unrealized P&L</div>\r\n                    <div className={`stat-value sm mono ${unrealizedPnl >= 0 ? 'text-positive' : 'text-negative'}`}>\r\n                        {fmtMoney(unrealizedPnl)}\r\n                    </div>\r\n                    <div className=\"stat-sub\">{posCount} open</div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Win Rate</div>\r\n                    <div className={`stat-value sm mono ${winRate >= 50 ? 'text-positive' : winRate > 0 ? 'text-negative' : ''}`}>\r\n                        {winRate.toFixed(1)}%\r\n                    </div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Sharpe Ratio</div>\r\n                    <div className={`stat-value sm mono ${sharpe >= 0 ? 'text-positive' : 'text-negative'}`}>\r\n                        {sharpe.toFixed(2)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Max Drawdown</div>\r\n                    <div className=\"stat-value sm mono text-negative\">{fmtPct(-Math.abs(maxDD))}</div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Profit Factor</div>\r\n                    <div className={`stat-value sm mono ${profitFactor >= 1 ? 'text-positive' : profitFactor > 0 ? 'text-negative' : ''}`}>\r\n                        {profitFactor === Infinity ? 'Ôê×' : profitFactor.toFixed(2)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Total Fees</div>\r\n                    <div className=\"stat-value sm mono\" style={{ color: 'var(--text-2)' }}>\r\n                        {fmtMoney(totalFees)}\r\n                    </div>\r\n                </div>\r\n                <div className=\"card card-compact\">\r\n                    <div className=\"stat-label\">Positions</div>\r\n                    <div className=\"stat-value sm mono\">{posCount} / {maxConcurrent}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Open Positions ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className=\"card animate-in\">\r\n                <div className=\"card-header\">\r\n                    <span className=\"card-title\">Open Positions</span>\r\n                    <span style={{ fontSize: 11, color: 'var(--text-2)' }}>\r\n                        {posCount} / {maxConcurrent} slots\r\n                    </span>\r\n                </div>\r\n                {positions.length === 0 ? (\r\n                    <div className=\"empty-state\" style={{ padding: 24 }}>\r\n                        <span style={{ fontSize: 12, color: 'var(--text-3)' }}>\r\n                            {botRunning ? 'Waiting for signal...' : 'Bot is idle ÔÇö press Start to begin trading'}\r\n                        </span>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"table-wrap\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Dir</th>\r\n                                    <th>Entry</th>\r\n                                    <th>Size</th>\r\n                                    <th>Margin</th>\r\n                                    <th>Lev</th>\r\n                                    <th>P&L</th>\r\n                                    <th>P&L %</th>\r\n                                    <th>TP</th>\r\n                                    <th>SL</th>\r\n                                    <th>Liq</th>\r\n                                    <th>Hold</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {positions.map((p, i) => {\r\n                                    const isLong = (p.direction ?? p.side ?? '').toLowerCase().includes('long');\r\n                                    const pnl = p.unrealized_pnl ?? p.pnl_usd ?? p.pnl ?? 0;\r\n                                    const pnlPct = p.unrealized_pnl_pct ?? p.pnl_pct ?? 0;\r\n                                    const margin = p.margin ?? (p.size_usd ? p.size_usd / (p.leverage ?? leverage) : 0);\r\n                                    const posLev = p.leverage ?? leverage;\r\n                                    const liqPrice = p.liquidation_price ?? p.liq_price ?? null;\r\n\r\n                                    // Hold time formatting\r\n                                    let holdStr = 'ÔÇö';\r\n                                    if (p.entry_time || p.hold_minutes) {\r\n                                        const mins = p.hold_minutes ?? Math.floor((Date.now() - new Date(p.entry_time).getTime()) / 60000);\r\n                                        if (mins >= 60) holdStr = `${Math.floor(mins / 60)}h ${mins % 60}m`;\r\n                                        else holdStr = `${mins}m`;\r\n                                    }\r\n\r\n                                    return (\r\n                                        <tr key={i}>\r\n                                            <td>\r\n                                                <span className={`badge ${isLong ? 'badge-long' : 'badge-short'}`}>\r\n                                                    {isLong ? <IconArrowUp style={{ width: 10, height: 10 }} /> : <IconArrowDown style={{ width: 10, height: 10 }} />}\r\n                                                    {isLong ? 'LONG' : 'SHORT'}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"mono\">{fmtMoney(p.entry_price ?? 0)}</td>\r\n                                            <td className=\"mono\">{p.size_usd ? fmtMoney(p.size_usd) : 'ÔÇö'}</td>\r\n                                            <td className=\"mono\" style={{ color: 'var(--blue)' }}>{fmtMoney(margin)}</td>\r\n                                            <td className=\"mono\">{posLev}x</td>\r\n                                            <td className={`mono ${pnl >= 0 ? 'text-positive' : 'text-negative'}`}>{fmtMoney(pnl)}</td>\r\n                                            <td className={`mono ${pnlPct >= 0 ? 'text-positive' : 'text-negative'}`}>{fmtPct(pnlPct)}</td>\r\n                                            <td className=\"mono text-positive\">{p.tp_price ? fmtMoney(p.tp_price) : 'ÔÇö'}</td>\r\n                                            <td className=\"mono text-negative\">{p.sl_price ? fmtMoney(p.sl_price) : 'ÔÇö'}</td>\r\n                                            <td className=\"mono\" style={{ color: 'var(--orange, #f59e0b)' }}>\r\n                                                {liqPrice ? fmtMoney(liqPrice) : 'ÔÇö'}\r\n                                            </td>\r\n                                            <td style={{ fontSize: 11, color: 'var(--text-2)' }}>{holdStr}</td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* ÔöÇÔöÇÔöÇ Trade History ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ */}\r\n            <div className=\"card animate-in\">\r\n                <div className=\"card-header\">\r\n                    <span className=\"card-title\">Trade History</span>\r\n                    <span style={{ fontSize: 11, color: 'var(--text-2)' }}>{trades.length} trades</span>\r\n                </div>\r\n                {trades.length === 0 ? (\r\n                    <div className=\"empty-state\" style={{ padding: 24 }}>\r\n                        <span style={{ fontSize: 12, color: 'var(--text-3)' }}>No trades yet</span>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"table-wrap\" style={{ maxHeight: 350, overflowY: 'auto' }}>\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Dir</th>\r\n                                    <th>Entry</th>\r\n                                    <th>Exit</th>\r\n                                    <th>P&L</th>\r\n                                    <th>%</th>\r\n                                    <th>Reason</th>\r\n                                    <th>Time</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {trades.slice().reverse().map((t, i) => {\r\n                                    const isLong = (t.direction ?? '').toLowerCase().includes('long');\r\n                                    const pnl = t.pnl_usd ?? t.pnl ?? 0;\r\n                                    const reason = t.close_reason ?? 'ÔÇö';\r\n\r\n                                    // Color-code close reasons\r\n                                    const reasonColor = reason.includes('PROFIT') ? 'var(--green)'\r\n                                        : reason.includes('STOP') || reason.includes('LIQUIDAT') ? 'var(--red)'\r\n                                            : reason.includes('TRAIL') ? 'var(--yellow, #eab308)'\r\n                                                : 'var(--text-2)';\r\n\r\n                                    return (\r\n                                        <tr key={i}>\r\n                                            <td>\r\n                                                <span className={`badge ${isLong ? 'badge-long' : 'badge-short'}`} style={{ fontSize: 9 }}>\r\n                                                    {isLong ? 'L' : 'S'}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"mono\">{fmtMoney(t.entry_price)}</td>\r\n                                            <td className=\"mono\">{t.exit_price ? fmtMoney(t.exit_price) : 'ÔÇö'}</td>\r\n                                            <td className={`mono ${pnl >= 0 ? 'text-positive' : 'text-negative'}`}>{fmtMoney(pnl)}</td>\r\n                                            <td className={`mono ${pnl >= 0 ? 'text-positive' : 'text-negative'}`}>{t.pnl_pct ? fmtPct(t.pnl_pct) : 'ÔÇö'}</td>\r\n                                            <td style={{ fontSize: 10, color: reasonColor, fontWeight: 500 }}>{reason}</td>\r\n                                            <td style={{ fontSize: 11, color: 'var(--text-2)' }}>{t.exit_time ?? t.timestamp ?? 'ÔÇö'}</td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\pages\\Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2928,2931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2928,2931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":115,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5563,5566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5563,5566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8093,8096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8093,8096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8355,8358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8355,8358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":229,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10661,10664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10661,10664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":296,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13551,13554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13551,13554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":449,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19819,19822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19819,19822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":462,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":462,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20246,20249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20246,20249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":474,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":474,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20731,20734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20731,20734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { apiPost } from '../hooks/useApi';\r\nimport { toast } from '../stores/toastStore';\r\nimport { IconKey, IconEye, IconEyeOff, IconCheck } from '../components/Icons';\r\n\r\ntype KeyConfig = {\r\n    name: string;\r\n    envKey: string;\r\n    placeholder: string;\r\n    description: string;\r\n};\r\n\r\nconst API_KEYS: KeyConfig[] = [\r\n    { name: 'Binance API Key', envKey: 'BINANCE_API_KEY', placeholder: 'Enter Binance API keyÔÇª', description: 'Required for live market data' },\r\n    { name: 'Binance Secret', envKey: 'BINANCE_API_SECRET', placeholder: 'Enter Binance secretÔÇª', description: 'Required for live market data' },\r\n    { name: 'OpenAI API Key', envKey: 'OPENAI_API_KEY', placeholder: 'sk-ÔÇª', description: 'For Nexus Agent (GPT-4o)' },\r\n    { name: 'Gemini API Key', envKey: 'GEMINI_API_KEY', placeholder: 'AIzaÔÇª', description: 'For Nexus Agent (Gemini 2.0 Flash)' },\r\n    { name: 'News API Key', envKey: 'NEWS_API_KEY', placeholder: 'Enter News API keyÔÇª', description: 'Optional ÔÇö for news feed' },\r\n    { name: 'Telegram Bot Token', envKey: 'TELEGRAM_BOT_TOKEN', placeholder: '123456:ABC-DEF1234ghIkl-...ÔÇª', description: 'From @BotFather ÔÇö for trade alerts' },\r\n    { name: 'Telegram Chat ID', envKey: 'TELEGRAM_CHAT_ID', placeholder: '123456789', description: 'Your Telegram user/group chat ID' },\r\n    { name: 'Hugging Face Token', envKey: 'HUGGINGFACE_TOKEN', placeholder: 'hf_ÔÇª', description: 'Required for model cloud sync' },\r\n    { name: 'HF Repo ID', envKey: 'HF_REPO_ID', placeholder: 'username/repo-name', description: 'Repository to store/pull models' },\r\n];\r\n\r\nconst LLM_PROVIDERS = [\r\n    { value: 'ollama', label: '­ƒªÖ Ollama (Local)', description: 'Free, private, runs on your GPU' },\r\n    { value: 'openai', label: 'ÔÜí OpenAI (GPT-4o)', description: 'Requires API key, best quality' },\r\n    { value: 'gemini', label: '­ƒÆÄ Gemini (2.0 Flash)', description: 'Requires API key, fast & free tier' },\r\n    { value: 'embedded', label: '­ƒºá Embedded (Qwen 0.5B)', description: 'Built-in local model (~1GB), no setup needed' },\r\n];\r\n\r\nfunction KeyCard({ config }: { config: KeyConfig }) {\r\n    const [value, setValue] = useState('');\r\n    const [show, setShow] = useState(false);\r\n    const [saved, setSaved] = useState(false);\r\n    const [configured, setConfigured] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch(`http://127.0.0.1:8420/api/settings/key-status/${config.envKey}`)\r\n            .then(r => r.json())\r\n            .then(d => setConfigured(d.is_set === true))\r\n            .catch(() => { });\r\n    }, [config.envKey]);\r\n\r\n    const save = async () => {\r\n        try {\r\n            await apiPost('/api/settings/keys', { key: config.envKey, value });\r\n            setSaved(true);\r\n            setConfigured(true);\r\n            toast.success(`${config.name} saved`);\r\n            setTimeout(() => setSaved(false), 2000);\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"card key-card animate-in\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-8\">\r\n                    <IconKey style={{ width: 16, height: 16, color: 'var(--accent)' }} />\r\n                    <div>\r\n                        <div style={{ fontSize: 13, fontWeight: 600 }}>{config.name}</div>\r\n                        <div style={{ fontSize: 11, color: 'var(--text-2)' }}>{config.description}</div>\r\n                    </div>\r\n                </div>\r\n                <span className={`badge ${configured ? 'badge-long' : 'badge-warning'}`}>\r\n                    {configured ? 'Configured' : 'Missing'}\r\n                </span>\r\n            </div>\r\n            <div className=\"input-row\">\r\n                <input\r\n                    className=\"input\"\r\n                    type={show ? 'text' : 'password'}\r\n                    placeholder={config.placeholder}\r\n                    value={value}\r\n                    onChange={e => setValue(e.target.value)}\r\n                    autoComplete=\"off\"\r\n                />\r\n                <button className=\"btn btn-sm btn-ghost\" onClick={() => setShow(s => !s)} aria-label=\"Toggle visibility\">\r\n                    {show ? <IconEyeOff style={{ width: 14, height: 14 }} /> : <IconEye style={{ width: 14, height: 14 }} />}\r\n                </button>\r\n                <button\r\n                    className={`btn btn-sm ${saved ? 'btn-success' : 'btn-primary'}`}\r\n                    onClick={save}\r\n                    disabled={!value.trim()}\r\n                >\r\n                    {saved ? <IconCheck style={{ width: 14, height: 14 }} /> : 'Save'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LlmProviderSelector() {\r\n    const [provider, setProvider] = useState('ollama');\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:8420/api/settings')\r\n            .then(r => r.json())\r\n            .then(d => {\r\n                if (d.llm_provider) setProvider(d.llm_provider);\r\n            })\r\n            .catch(() => { });\r\n    }, []);\r\n\r\n    const save = async (newProvider: string) => {\r\n        setProvider(newProvider);\r\n        setSaving(true);\r\n        try {\r\n            await apiPost('/api/settings', { llm_provider: newProvider });\r\n            const label = LLM_PROVIDERS.find(p => p.value === newProvider)?.label || newProvider;\r\n            toast.success(`LLM priority set to ${label}`);\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        }\r\n        setSaving(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"card animate-in\">\r\n            <div className=\"card-title\" style={{ marginBottom: 8 }}>AI Provider Priority</div>\r\n            <p style={{ fontSize: 11, color: 'var(--text-2)', marginBottom: 12 }}>\r\n                Choose which AI provider Dr. Nexus uses first. If it fails, the system automatically falls back to the next available provider.\r\n            </p>\r\n            <div className=\"flex-col gap-6\">\r\n                {LLM_PROVIDERS.map(p => (\r\n                    <label\r\n                        key={p.value}\r\n                        className=\"flex items-center gap-10\"\r\n                        style={{\r\n                            padding: '8px 12px',\r\n                            borderRadius: 8,\r\n                            cursor: 'pointer',\r\n                            background: provider === p.value ? 'rgba(99,102,241,0.12)' : 'transparent',\r\n                            border: provider === p.value ? '1px solid var(--accent)' : '1px solid transparent',\r\n                            transition: 'all 0.2s',\r\n                        }}\r\n                    >\r\n                        <input\r\n                            type=\"radio\"\r\n                            name=\"llm_provider\"\r\n                            value={p.value}\r\n                            checked={provider === p.value}\r\n                            onChange={() => save(p.value)}\r\n                            disabled={saving}\r\n                            style={{ accentColor: 'var(--accent)' }}\r\n                        />\r\n                        <div>\r\n                            <div style={{ fontSize: 13, fontWeight: 600 }}>{p.label}</div>\r\n                            <div style={{ fontSize: 11, color: 'var(--text-2)' }}>{p.description}</div>\r\n                        </div>\r\n                    </label>\r\n                ))}\r\n            </div>\r\n            <p style={{ fontSize: 10, color: 'var(--text-3)', marginTop: 10, fontStyle: 'italic' }}>\r\n                Fallback order: if the primary provider fails, the system tries the remaining providers automatically.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction HuggingFaceSync() {\r\n    const [syncing, setSyncing] = useState<'push' | 'pull' | null>(null);\r\n\r\n    const handleSync = async (mode: 'push' | 'pull') => {\r\n        setSyncing(mode);\r\n        try {\r\n            const res = await apiPost(`/api/settings/hf-sync/${mode}`, {}) as any;\r\n            if (res.success) {\r\n                toast.success(`Successfully ${mode === 'push' ? 'uploaded' : 'downloaded'} models to Hub`);\r\n            } else {\r\n                toast.error(res.error || 'Sync failed');\r\n            }\r\n        } catch (e: any) {\r\n            toast.error(e.message || 'Sync failed');\r\n        } finally {\r\n            setSyncing(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"card animate-in\" style={{ animationDelay: '250ms' }}>\r\n            <div className=\"flex items-center gap-12 mb-16\">\r\n                <div style={{ fontSize: 24 }}>­ƒñù</div>\r\n                <div>\r\n                    <div style={{ fontSize: 13, fontWeight: 600 }}>Cloud Model Sync</div>\r\n                    <div style={{ fontSize: 11, color: 'var(--text-2)' }}>Backup or share your trained models on Hugging Face Hub</div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-12\">\r\n                <button\r\n                    className={`btn btn-sm btn-primary flex-1 ${syncing === 'push' ? 'loading' : ''}`}\r\n                    onClick={() => handleSync('push')}\r\n                    disabled={!!syncing}\r\n                >\r\n                    {syncing === 'push' ? 'Pushing...' : 'Ô¼å´©Å Push to Hub'}\r\n                </button>\r\n                <button\r\n                    className={`btn btn-sm btn-secondary flex-1 ${syncing === 'pull' ? 'loading' : ''}`}\r\n                    onClick={() => handleSync('pull')}\r\n                    disabled={!!syncing}\r\n                >\r\n                    {syncing === 'pull' ? 'Pulling...' : 'Ô¼ç´©Å Pull from Hub'}\r\n                </button>\r\n            </div>\r\n            <div style={{ fontSize: 10, color: 'var(--text-3)', marginTop: 8, fontStyle: 'italic', textAlign: 'center' }}>\r\n                * Pulling will overwrite local models and re-initialize the predictor.\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TelegramSection() {\r\n    const [testing, setTesting] = useState(false);\r\n    const [result, setResult] = useState<{ ok: boolean; message?: string; error?: string } | null>(null);\r\n\r\n    const testConnection = async () => {\r\n        setTesting(true);\r\n        setResult(null);\r\n        try {\r\n            const r = await fetch('http://127.0.0.1:8420/api/telegram/test', { method: 'POST' });\r\n            const data = await r.json();\r\n            setResult(data);\r\n            if (data.ok) toast.success(data.message || 'Test message sent!');\r\n            else toast.error(data.error || 'Connection failed');\r\n        } catch (e: any) {\r\n            setResult({ ok: false, error: e.message });\r\n            toast.error('Failed to reach backend');\r\n        }\r\n        setTesting(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"card animate-in\">\r\n            <div className=\"card-title\" style={{ marginBottom: 8 }}>­ƒô▒ Telegram Notifications</div>\r\n            <p style={{ fontSize: 11, color: 'var(--text-2)', marginBottom: 12 }}>\r\n                Get real-time trade alerts and hourly P&L summaries on your phone.\r\n                Save your Bot Token and Chat ID above, then test the connection.\r\n            </p>\r\n            <div className=\"flex items-center gap-10\">\r\n                <button\r\n                    className={`btn btn-sm ${result?.ok ? 'btn-success' : 'btn-primary'}`}\r\n                    onClick={testConnection}\r\n                    disabled={testing}\r\n                    style={{ minWidth: 140 }}\r\n                >\r\n                    {testing ? 'ÔÅ│ Sending...' : result?.ok ? 'Ô£à Connected!' : '­ƒöö Test Connection'}\r\n                </button>\r\n                {result && !result.ok && (\r\n                    <span style={{ fontSize: 11, color: 'var(--negative)' }}>{result.error}</span>\r\n                )}\r\n            </div>\r\n            <div style={{ marginTop: 12, padding: '8px 12px', borderRadius: 8, background: 'rgba(99,102,241,0.08)', fontSize: 11, color: 'var(--text-2)' }}>\r\n                <b>Setup:</b> Message <code>@BotFather</code> on Telegram ÔåÆ <code>/newbot</code> ÔåÆ copy token.\r\n                Then send any message to your bot and visit\r\n                <code style={{ wordBreak: 'break-all' }}> https://api.telegram.org/bot&lt;TOKEN&gt;/getUpdates</code> to find your Chat ID.\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n   BETA FEATURES TOGGLE\r\n   ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */\r\n\r\ntype BetaFeature = {\r\n    label: string;\r\n    description: string;\r\n    enabled: boolean;\r\n};\r\n\r\nfunction BetaFeaturesPanel({ onBetaChange }: { onBetaChange?: (key: string, enabled: boolean) => void }) {\r\n    const [features, setFeatures] = useState<Record<string, BetaFeature>>({});\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:8420/api/beta-features')\r\n            .then(r => r.json())\r\n            .then(setFeatures)\r\n            .catch(() => { });\r\n    }, []);\r\n\r\n    const toggle = async (key: string) => {\r\n        const current = features[key]?.enabled || false;\r\n        try {\r\n            await apiPost('/api/beta-features', { [key]: !current });\r\n            setFeatures(prev => ({\r\n                ...prev,\r\n                [key]: { ...prev[key], enabled: !current },\r\n            }));\r\n            toast.success(`${features[key]?.label} ${!current ? 'enabled' : 'disabled'}`);\r\n            onBetaChange?.(key, !current);\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        }\r\n    };\r\n\r\n    const keys = Object.keys(features);\r\n    if (!keys.length) return null;\r\n\r\n    return (\r\n        <div className=\"card animate-in\">\r\n            <div className=\"flex items-center gap-8\" style={{ marginBottom: 8 }}>\r\n                <div className=\"card-title\" style={{ margin: 0 }}>­ƒº¬ Beta Features</div>\r\n                <span style={{\r\n                    fontSize: 9, fontWeight: 700, padding: '2px 6px', borderRadius: 4,\r\n                    background: 'linear-gradient(135deg, #f59e0b, #ef4444)',\r\n                    color: '#fff', letterSpacing: '0.05em', textTransform: 'uppercase',\r\n                }}>BETA</span>\r\n            </div>\r\n            <p style={{ fontSize: 11, color: 'var(--text-2)', marginBottom: 12 }}>\r\n                Experimental features that may change or be removed. Enable at your own risk.\r\n            </p>\r\n            <div className=\"flex-col gap-6\">\r\n                {keys.map(key => (\r\n                    <label\r\n                        key={key}\r\n                        className=\"flex items-center gap-10\"\r\n                        style={{\r\n                            padding: '8px 12px',\r\n                            borderRadius: 8,\r\n                            cursor: 'pointer',\r\n                            background: features[key].enabled ? 'rgba(245,158,11,0.10)' : 'transparent',\r\n                            border: features[key].enabled ? '1px solid rgba(245,158,11,0.4)' : '1px solid rgba(255,255,255,0.06)',\r\n                            transition: 'all 0.2s',\r\n                        }}\r\n                    >\r\n                        <div style={{\r\n                            width: 36, height: 20, borderRadius: 10,\r\n                            background: features[key].enabled ? 'var(--accent)' : 'rgba(255,255,255,0.1)',\r\n                            position: 'relative', transition: 'background 0.2s', cursor: 'pointer', flexShrink: 0,\r\n                        }}\r\n                            onClick={() => toggle(key)}\r\n                        >\r\n                            <div style={{\r\n                                width: 16, height: 16, borderRadius: '50%', background: '#fff',\r\n                                position: 'absolute', top: 2,\r\n                                left: features[key].enabled ? 18 : 2,\r\n                                transition: 'left 0.2s', boxShadow: '0 1px 3px rgba(0,0,0,0.3)',\r\n                            }} />\r\n                        </div>\r\n                        <div style={{ flex: 1, minWidth: 0 }}>\r\n                            <div style={{ fontSize: 13, fontWeight: 600 }}>{features[key].label}</div>\r\n                            <div style={{ fontSize: 11, color: 'var(--text-2)' }}>{features[key].description}</div>\r\n                        </div>\r\n                    </label>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n   MODEL ARCHITECTURE SELECTOR\r\n   ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */\r\n\r\ntype ModelInfo = {\r\n    key: string;\r\n    label: string;\r\n    params: string;\r\n    vram_gb: number;\r\n    description: string;\r\n    has_weights: boolean;\r\n    file_size_mb: number;\r\n    vram_ok: boolean;\r\n    is_active: boolean;\r\n    best_checkpoint_acc: number | null;\r\n    epochs_trained: number;\r\n    checkpoint_count: number;\r\n    checkpoints: { epoch: number; accuracy: number; filename: string }[];\r\n};\r\n\r\ntype ModelsResponse = {\r\n    models: ModelInfo[];\r\n    active_arch: string;\r\n    running_arch: string | null;\r\n    beta_enabled: boolean;\r\n    gpu: { name: string; vram_total_gb: number; vram_free_gb: number };\r\n};\r\n\r\ntype HFModel = {\r\n    id: string;\r\n    author: string;\r\n    downloads: number;\r\n    likes: number;\r\n    description: string;\r\n    tags: string[];\r\n};\r\n\r\nfunction VramBar({ used, total, required }: { used: number; total: number; required: number }) {\r\n    if (total <= 0) return null;\r\n    const usedPct = Math.min((used / total) * 100, 100);\r\n    const reqPct = Math.min((required / total) * 100, 100);\r\n    const ok = (total - used) >= required;\r\n\r\n    return (\r\n        <div style={{ width: '100%', marginTop: 4 }}>\r\n            <div style={{\r\n                height: 6, borderRadius: 3, background: 'rgba(255,255,255,0.06)',\r\n                position: 'relative', overflow: 'hidden',\r\n            }}>\r\n                <div style={{\r\n                    position: 'absolute', left: 0, top: 0, height: '100%',\r\n                    width: `${usedPct}%`, background: 'rgba(255,255,255,0.15)',\r\n                    borderRadius: 3,\r\n                }} />\r\n                <div style={{\r\n                    position: 'absolute', left: `${usedPct}%`, top: 0, height: '100%',\r\n                    width: `${reqPct}%`,\r\n                    background: ok ? 'rgba(34,197,94,0.5)' : 'rgba(239,68,68,0.5)',\r\n                    borderRadius: 3,\r\n                }} />\r\n            </div>\r\n            <div style={{ fontSize: 9, color: 'var(--text-3)', marginTop: 2 }}>\r\n                Needs {required} GB ÔÇö {ok ? 'Ô£à OK' : 'ÔÜá´©Å Insufficient VRAM'}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ModelSelector() {\r\n    const [data, setData] = useState<ModelsResponse | null>(null);\r\n    const [selecting, setSelecting] = useState('');\r\n    const [hfModels, setHfModels] = useState<HFModel[]>([]);\r\n    const [hfSearching, setHfSearching] = useState(false);\r\n    const [hfQuery, setHfQuery] = useState('bitcoin price prediction transformer');\r\n    const [hfSearched, setHfSearched] = useState(false);\r\n    const [downloading, setDownloading] = useState('');\r\n\r\n    const loadModels = useCallback(() => {\r\n        fetch('http://127.0.0.1:8420/api/models')\r\n            .then(r => r.json())\r\n            .then(setData)\r\n            .catch(() => { });\r\n    }, []);\r\n\r\n    useEffect(() => { loadModels(); }, [loadModels]);\r\n\r\n    const selectModel = async (arch: string) => {\r\n        setSelecting(arch);\r\n        try {\r\n            const result = await apiPost<{ status: string; message: string }>('/api/models/select', { arch });\r\n            toast.success(result.message);\r\n            loadModels();\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        }\r\n        setSelecting('');\r\n    };\r\n\r\n    const searchHuggingFace = async () => {\r\n        setHfSearching(true);\r\n        setHfSearched(false);\r\n        try {\r\n            const result = await apiPost<{ models: HFModel[] }>('/api/models/hf-search', { query: hfQuery });\r\n            setHfModels(result.models || []);\r\n            setHfSearched(true);\r\n        } catch (e: any) {\r\n            toast.error('HuggingFace search failed: ' + e.message);\r\n        }\r\n        setHfSearching(false);\r\n    };\r\n\r\n    const downloadHfModel = async (modelId: string) => {\r\n        setDownloading(modelId);\r\n        try {\r\n            const result = await apiPost<{ status: string; message: string }>('/api/models/hf-download', { model_id: modelId });\r\n            toast.success(result.message || `Downloaded ${modelId}`);\r\n            loadModels();\r\n        } catch (e: any) {\r\n            toast.error(e.message);\r\n        }\r\n        setDownloading('');\r\n    };\r\n\r\n    if (!data) return null;\r\n\r\n    const needsRestart = data.active_arch !== data.running_arch;\r\n\r\n    return (\r\n        <div className=\"card animate-in\">\r\n            <div className=\"flex items-center gap-8\" style={{ marginBottom: 4 }}>\r\n                <div className=\"card-title\" style={{ margin: 0 }}>­ƒºá Model Architecture</div>\r\n                <span style={{\r\n                    fontSize: 9, fontWeight: 700, padding: '2px 6px', borderRadius: 4,\r\n                    background: 'linear-gradient(135deg, #f59e0b, #ef4444)',\r\n                    color: '#fff', letterSpacing: '0.05em', textTransform: 'uppercase',\r\n                }}>BETA</span>\r\n            </div>\r\n\r\n            {/* GPU Info Bar */}\r\n            <div style={{\r\n                padding: '6px 10px', borderRadius: 6, marginBottom: 12,\r\n                background: 'rgba(99,102,241,0.08)', fontSize: 11, color: 'var(--text-2)',\r\n                display: 'flex', justifyContent: 'space-between', alignItems: 'center',\r\n            }}>\r\n                <span>­ƒûÑ´©Å {data.gpu.name}</span>\r\n                <span className=\"mono\">{data.gpu.vram_free_gb} / {data.gpu.vram_total_gb} GB VRAM free</span>\r\n            </div>\r\n\r\n            {/* Restart Warning */}\r\n            {needsRestart && (\r\n                <div style={{\r\n                    padding: '8px 12px', borderRadius: 8, marginBottom: 12,\r\n                    background: 'rgba(245,158,11,0.12)', border: '1px solid rgba(245,158,11,0.3)',\r\n                    fontSize: 11, color: '#f59e0b',\r\n                }}>\r\n                    ÔÜá´©Å Model changed to <b>{data.active_arch}</b> ÔÇö restart the server to apply.\r\n                    Currently running: <b>{data.running_arch}</b>\r\n                </div>\r\n            )}\r\n\r\n            {/* Local Models Grid */}\r\n            <div style={{ fontSize: 12, fontWeight: 600, marginBottom: 8, color: 'var(--text-1)' }}>Local Models</div>\r\n            <div className=\"flex-col gap-6\" style={{ marginBottom: 16 }}>\r\n                {data.models.map(m => (\r\n                    <div\r\n                        key={m.key}\r\n                        onClick={() => !selecting && selectModel(m.key)}\r\n                        style={{\r\n                            padding: '10px 14px',\r\n                            borderRadius: 10,\r\n                            cursor: selecting ? 'wait' : 'pointer',\r\n                            background: m.is_active ? 'rgba(99,102,241,0.12)' : 'rgba(255,255,255,0.02)',\r\n                            border: m.is_active ? '1px solid var(--accent)' : '1px solid rgba(255,255,255,0.06)',\r\n                            transition: 'all 0.2s',\r\n                            opacity: selecting === m.key ? 0.6 : 1,\r\n                        }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between\" style={{ marginBottom: 4 }}>\r\n                            <div className=\"flex items-center gap-8\">\r\n                                <div style={{\r\n                                    width: 16, height: 16, borderRadius: '50%',\r\n                                    border: m.is_active ? '5px solid var(--accent)' : '2px solid rgba(255,255,255,0.2)',\r\n                                    transition: 'all 0.2s',\r\n                                }} />\r\n                                <span style={{ fontSize: 13, fontWeight: 600 }}>{m.label}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-6\">\r\n                                {m.has_weights ? (\r\n                                    <span style={{\r\n                                        fontSize: 9, padding: '2px 6px', borderRadius: 4,\r\n                                        background: 'rgba(34,197,94,0.15)', color: '#22c55e',\r\n                                        fontWeight: 600,\r\n                                    }}>READY</span>\r\n                                ) : (\r\n                                    <span style={{\r\n                                        fontSize: 9, padding: '2px 6px', borderRadius: 4,\r\n                                        background: 'rgba(255,255,255,0.06)', color: 'var(--text-3)',\r\n                                        fontWeight: 600,\r\n                                    }}>NO WEIGHTS</span>\r\n                                )}\r\n                                <span className=\"mono\" style={{\r\n                                    fontSize: 10, color: 'var(--text-3)',\r\n                                }}>{m.params} params</span>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ fontSize: 11, color: 'var(--text-2)', marginLeft: 24, marginBottom: 4 }}>\r\n                            {m.description}\r\n                        </div>\r\n\r\n                        {/* Checkpoint Accuracy Stats */}\r\n                        {m.best_checkpoint_acc != null && m.best_checkpoint_acc > 0 ? (\r\n                            <div style={{\r\n                                marginLeft: 24, marginBottom: 4, padding: '6px 10px',\r\n                                borderRadius: 6, background: 'rgba(34,197,94,0.06)',\r\n                                border: '1px solid rgba(34,197,94,0.12)',\r\n                                display: 'flex', alignItems: 'center', gap: 12,\r\n                            }}>\r\n                                <div style={{ display: 'flex', alignItems: 'baseline', gap: 4 }}>\r\n                                    <span style={{ fontSize: 16, fontWeight: 700, color: '#22c55e' }}>\r\n                                        {m.best_checkpoint_acc.toFixed(1)}%\r\n                                    </span>\r\n                                    <span style={{ fontSize: 9, color: 'var(--text-3)' }}>best acc</span>\r\n                                </div>\r\n                                <span style={{ width: 1, height: 16, background: 'rgba(255,255,255,0.08)' }} />\r\n                                <div style={{ fontSize: 10, color: 'var(--text-3)' }}>\r\n                                    {m.epochs_trained} epoch{m.epochs_trained !== 1 ? 's' : ''}\r\n                                </div>\r\n                                <span style={{ width: 1, height: 16, background: 'rgba(255,255,255,0.08)' }} />\r\n                                <div style={{ fontSize: 10, color: 'var(--text-3)' }}>\r\n                                    {m.checkpoint_count} checkpoint{m.checkpoint_count !== 1 ? 's' : ''}\r\n                                </div>\r\n                                {/* Mini sparkline of checkpoint accuracy progression */}\r\n                                {m.checkpoints.length > 1 && (\r\n                                    <div style={{\r\n                                        marginLeft: 'auto', display: 'flex', alignItems: 'flex-end',\r\n                                        gap: 1, height: 16,\r\n                                    }}>\r\n                                        {m.checkpoints.slice(-8).map((ck, i) => {\r\n                                            const min = Math.min(...m.checkpoints.slice(-8).map(c => c.accuracy));\r\n                                            const max = Math.max(...m.checkpoints.slice(-8).map(c => c.accuracy));\r\n                                            const range = max - min || 1;\r\n                                            const h = Math.max(3, ((ck.accuracy - min) / range) * 14);\r\n                                            return (\r\n                                                <div key={i} title={`Epoch ${ck.epoch}: ${ck.accuracy}%`}\r\n                                                    style={{\r\n                                                        width: 3, height: h, borderRadius: 1,\r\n                                                        background: i === m.checkpoints.slice(-8).length - 1\r\n                                                            ? '#22c55e' : 'rgba(34,197,94,0.35)',\r\n                                                        transition: 'height 0.3s',\r\n                                                    }}\r\n                                                />\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ) : m.has_weights ? (\r\n                            <div style={{\r\n                                marginLeft: 24, marginBottom: 4, fontSize: 10,\r\n                                color: 'var(--text-3)', fontStyle: 'italic',\r\n                            }}>\r\n                                Weights loaded ÔÇö no checkpoint accuracy data yet\r\n                            </div>\r\n                        ) : (\r\n                            <div style={{\r\n                                marginLeft: 24, marginBottom: 4, fontSize: 10,\r\n                                color: 'var(--text-3)', fontStyle: 'italic',\r\n                            }}>\r\n                                Not trained yet ÔÇö train to see accuracy stats\r\n                            </div>\r\n                        )}\r\n\r\n                        {m.file_size_mb > 0 && (\r\n                            <div style={{ fontSize: 10, color: 'var(--text-3)', marginLeft: 24 }}>\r\n                                ­ƒÆ¥ {m.file_size_mb} MB on disk\r\n                            </div>\r\n                        )}\r\n                        <div style={{ marginLeft: 24, maxWidth: 200 }}>\r\n                            <VramBar\r\n                                used={data.gpu.vram_total_gb - data.gpu.vram_free_gb}\r\n                                total={data.gpu.vram_total_gb}\r\n                                required={m.vram_gb}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* HuggingFace Marketplace */}\r\n            <div style={{\r\n                borderTop: '1px solid rgba(255,255,255,0.06)',\r\n                paddingTop: 16, marginTop: 8,\r\n            }}>\r\n                <div className=\"flex items-center gap-8\" style={{ marginBottom: 8 }}>\r\n                    <span style={{ fontSize: 12, fontWeight: 600, color: 'var(--text-1)' }}>\r\n                        ­ƒñù HuggingFace Model Hub\r\n                    </span>\r\n                    <span style={{\r\n                        fontSize: 9, padding: '2px 6px', borderRadius: 4,\r\n                        background: 'rgba(255,213,79,0.12)', color: '#ffd54f',\r\n                        fontWeight: 600,\r\n                    }}>EXPERIMENTAL</span>\r\n                </div>\r\n                <p style={{ fontSize: 11, color: 'var(--text-2)', marginBottom: 10 }}>\r\n                    Search for pre-trained financial/crypto models on HuggingFace.\r\n                    Community models may significantly outperform local training.\r\n                </p>\r\n                <div className=\"flex items-center gap-8\" style={{ marginBottom: 12 }}>\r\n                    <input\r\n                        className=\"input\"\r\n                        value={hfQuery}\r\n                        onChange={e => setHfQuery(e.target.value)}\r\n                        placeholder=\"Search HuggingFace modelsÔÇª\"\r\n                        onKeyDown={e => e.key === 'Enter' && searchHuggingFace()}\r\n                        style={{ flex: 1, fontSize: 12 }}\r\n                    />\r\n                    <button\r\n                        className=\"btn btn-sm btn-primary\"\r\n                        onClick={searchHuggingFace}\r\n                        disabled={hfSearching || !hfQuery.trim()}\r\n                        style={{ minWidth: 80 }}\r\n                    >\r\n                        {hfSearching ? 'ÔÅ│ ...' : '­ƒöì Search'}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* HF Results */}\r\n                {hfSearched && hfModels.length === 0 && (\r\n                    <div style={{\r\n                        padding: '12px', borderRadius: 8, textAlign: 'center',\r\n                        background: 'rgba(255,255,255,0.02)', fontSize: 11, color: 'var(--text-3)',\r\n                    }}>\r\n                        No compatible models found. Try different search terms like \"crypto\", \"finance\", \"time-series\".\r\n                    </div>\r\n                )}\r\n\r\n                {hfModels.length > 0 && (\r\n                    <div className=\"flex-col gap-6\">\r\n                        {hfModels.map(m => (\r\n                            <div key={m.id} style={{\r\n                                padding: '10px 14px', borderRadius: 10,\r\n                                background: 'rgba(255,255,255,0.02)',\r\n                                border: '1px solid rgba(255,255,255,0.06)',\r\n                                transition: 'all 0.2s',\r\n                            }}>\r\n                                <div className=\"flex items-center justify-between\" style={{ marginBottom: 4 }}>\r\n                                    <div>\r\n                                        <div style={{ fontSize: 13, fontWeight: 600 }}>{m.id}</div>\r\n                                        <div style={{ fontSize: 10, color: 'var(--text-3)' }}>by {m.author}</div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-8\">\r\n                                        <span style={{ fontSize: 10, color: 'var(--text-3)' }}>\r\n                                            Ô¼ç´©Å {m.downloads >= 1000 ? `${(m.downloads / 1000).toFixed(1)}k` : m.downloads}\r\n                                        </span>\r\n                                        <span style={{ fontSize: 10, color: 'var(--text-3)' }}>\r\n                                            ÔØñ´©Å {m.likes}\r\n                                        </span>\r\n                                        <button\r\n                                            className=\"btn btn-sm btn-primary\"\r\n                                            onClick={(e) => { e.stopPropagation(); downloadHfModel(m.id); }}\r\n                                            disabled={downloading === m.id}\r\n                                            style={{ fontSize: 10, minWidth: 70 }}\r\n                                        >\r\n                                            {downloading === m.id ? 'ÔÅ│...' : '­ƒôÑ Download'}\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                                {m.description && (\r\n                                    <div style={{ fontSize: 11, color: 'var(--text-2)', marginTop: 2 }}>\r\n                                        {m.description.slice(0, 150)}{m.description.length > 150 ? 'ÔÇª' : ''}\r\n                                    </div>\r\n                                )}\r\n                                {m.tags.length > 0 && (\r\n                                    <div className=\"flex items-center gap-4\" style={{ marginTop: 4, flexWrap: 'wrap' }}>\r\n                                        {m.tags.slice(0, 5).map(t => (\r\n                                            <span key={t} style={{\r\n                                                fontSize: 9, padding: '1px 5px', borderRadius: 3,\r\n                                                background: 'rgba(99,102,241,0.10)', color: 'var(--accent)',\r\n                                                fontWeight: 500,\r\n                                            }}>{t}</span>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n/* ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ\r\n   MAIN SETTINGS PAGE\r\n   ÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉÔòÉ */\r\n\r\nexport default function Settings() {\r\n    const [betaEnabled, setBetaEnabled] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch('http://127.0.0.1:8420/api/beta-features')\r\n            .then(r => r.json())\r\n            .then(d => {\r\n                setBetaEnabled(d?.model_selector?.enabled || false);\r\n            })\r\n            .catch(() => { });\r\n    }, []);\r\n\r\n    const handleBetaChange = (key: string, enabled: boolean) => {\r\n        if (key === 'model_selector') setBetaEnabled(enabled);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-col gap-16\">\r\n            <div>\r\n                <h1 style={{ fontSize: 18, fontWeight: 700, marginBottom: 4 }}>Settings</h1>\r\n                <p style={{ fontSize: 12, color: 'var(--text-2)' }}>Manage API keys, AI provider priority, and system configuration</p>\r\n            </div>\r\n\r\n            {/* Beta Features Toggle ÔÇö always visible */}\r\n            <BetaFeaturesPanel onBetaChange={handleBetaChange} />\r\n\r\n            {/* Model Selector ÔÇö only visible when beta is enabled */}\r\n            {betaEnabled && <ModelSelector />}\r\n\r\n            <div className=\"grid grid-cols-2 gap-16\">\r\n                <LlmProviderSelector />\r\n                <HuggingFaceSync />\r\n            </div>\r\n\r\n            <div>\r\n                <div className=\"card-title\" style={{ marginBottom: 12 }}>API Keys</div>\r\n                <div className=\"settings-grid stagger\">\r\n                    {API_KEYS.map(config => (\r\n                        <KeyCard key={config.envKey} config={config} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <TelegramSection />\r\n\r\n            <div className=\"card animate-in\" style={{ maxWidth: 480 }}>\r\n                <div className=\"card-title\" style={{ marginBottom: 12 }}>System Info</div>\r\n                <div className=\"flex-col gap-8\" style={{ fontSize: 12 }}>\r\n                    <div className=\"flex justify-between\">\r\n                        <span style={{ color: 'var(--text-1)' }}>Platform</span>\r\n                        <span className=\"mono\">Nexus Shadow-Quant</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                        <span style={{ color: 'var(--text-1)' }}>Frontend</span>\r\n                        <span className=\"mono\">React + Vite</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                        <span style={{ color: 'var(--text-1)' }}>Backend</span>\r\n                        <span className=\"mono\">FastAPI @ 127.0.0.1:8420</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\stores\\liveStore.ts","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nF:\\Predictor\\desktop\\src\\stores\\liveStore.ts:178:5\n  176 | export function useLiveSelector<T>(selector: (s: WSState) => T): T {\n  177 |     const selectorRef = useRef(selector);\n> 178 |     selectorRef.current = selector;\n      |     ^^^^^^^^^^^^^^^^^^^ Cannot update ref during render\n  179 |\n  180 |     const snap = useSyncExternalStore(\n  181 |         subscribe,","line":178,"column":5,"nodeType":null,"endLine":178,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Live WebSocket Store ÔÇö External Store with useSyncExternalStore\r\n * ================================================================\r\n * Replaces the old WebSocketProvider/Context pattern that caused\r\n * full-tree re-renders on every WS tick.\r\n *\r\n * Components subscribe to only the slices of state they need via\r\n * selector hooks (useLivePrice, useLivePositions, etc.), so only\r\n * the affected component re-renders.\r\n */\r\nimport { useSyncExternalStore, useRef } from 'react';\r\n\r\n// ÔöÇÔöÇÔöÇ Types ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nexport type WSState = {\r\n    price: number | null;\r\n    prediction: Record<string, unknown> | null;\r\n    quant: Record<string, unknown> | null;\r\n    alt_signals: Record<string, unknown> | null;\r\n    accuracy: number | null;\r\n    accuracy_source: 'live' | 'training' | null;\r\n    live_accuracy_samples: number;\r\n    positions: Array<Record<string, unknown>>;\r\n    stats: Record<string, unknown> | null;\r\n    bot_running: boolean;\r\n    connected: boolean;\r\n    timestamp: string | null;\r\n    change_24h: number | null;\r\n    change_pct: number | null;\r\n    high_24h: number | null;\r\n    low_24h: number | null;\r\n    volume_btc: number | null;\r\n    volume_usdt: number | null;\r\n    ws_connected: boolean;\r\n};\r\n\r\nconst DEFAULT_STATE: WSState = {\r\n    price: null,\r\n    prediction: null,\r\n    quant: null,\r\n    alt_signals: null,\r\n    accuracy: null,\r\n    accuracy_source: null,\r\n    live_accuracy_samples: 0,\r\n    positions: [],\r\n    stats: null,\r\n    bot_running: false,\r\n    connected: false,\r\n    timestamp: null,\r\n    change_24h: null,\r\n    change_pct: null,\r\n    high_24h: null,\r\n    low_24h: null,\r\n    volume_btc: null,\r\n    volume_usdt: null,\r\n    ws_connected: false,\r\n};\r\n\r\n// ÔöÇÔöÇÔöÇ External Store (module-level singleton) ÔöÇÔöÇÔöÇÔöÇ\r\nlet state: WSState = { ...DEFAULT_STATE };\r\nconst listeners = new Set<() => void>();\r\n\r\nfunction getSnapshot(): WSState {\r\n    return state;\r\n}\r\n\r\nfunction subscribe(listener: () => void): () => void {\r\n    listeners.add(listener);\r\n    return () => listeners.delete(listener);\r\n}\r\n\r\nfunction setState(partial: Partial<WSState>) {\r\n    state = { ...state, ...partial };\r\n    listeners.forEach((l) => l());\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ WebSocket Connection ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nconst WS_URL = 'ws://127.0.0.1:8420/ws/live';\r\nconst MAX_BACKOFF_MS = 30_000;\r\nconst BASE_DELAY_MS = 1_000;\r\n\r\nlet ws: WebSocket | null = null;\r\nlet backoff = BASE_DELAY_MS;\r\nlet mounted = false;\r\nlet reconnectTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\nfunction scheduleReconnect() {\r\n    if (!mounted) return;\r\n    const jitter = Math.random() * 500;\r\n    const delay = backoff + jitter;\r\n    backoff = Math.min(backoff * 2, MAX_BACKOFF_MS);\r\n    reconnectTimer = setTimeout(connect, delay);\r\n}\r\n\r\nfunction connect() {\r\n    if (!mounted) return;\r\n\r\n    try {\r\n        ws = new WebSocket(WS_URL);\r\n\r\n        ws.onopen = () => {\r\n            if (!mounted) return;\r\n            backoff = BASE_DELAY_MS;\r\n            setState({ connected: true });\r\n        };\r\n\r\n        ws.onmessage = (event) => {\r\n            if (!mounted) return;\r\n            try {\r\n                const data = JSON.parse(event.data);\r\n                if (data.type === 'state_update') {\r\n                    setState({\r\n                        price: data.price ?? state.price,\r\n                        prediction: data.prediction ?? state.prediction,\r\n                        quant: data.quant ?? state.quant,\r\n                        alt_signals: data.alt_signals ?? state.alt_signals,\r\n                        accuracy: data.accuracy ?? state.accuracy,\r\n                        accuracy_source: data.accuracy_source ?? state.accuracy_source,\r\n                        live_accuracy_samples: data.live_accuracy_samples ?? state.live_accuracy_samples,\r\n                        positions: data.positions ?? state.positions,\r\n                        stats: data.stats ?? state.stats,\r\n                        bot_running: data.bot_running ?? state.bot_running,\r\n                        timestamp: data.timestamp ?? state.timestamp,\r\n                        change_24h: data.change_24h ?? state.change_24h,\r\n                        change_pct: data.change_pct ?? state.change_pct,\r\n                        high_24h: data.high_24h ?? state.high_24h,\r\n                        low_24h: data.low_24h ?? state.low_24h,\r\n                        volume_btc: data.volume_btc ?? state.volume_btc,\r\n                        volume_usdt: data.volume_usdt ?? state.volume_usdt,\r\n                        ws_connected: data.ws_connected ?? state.ws_connected,\r\n                    });\r\n                }\r\n            } catch {\r\n                // Malformed message, skip\r\n            }\r\n        };\r\n\r\n        ws.onclose = () => {\r\n            if (!mounted) return;\r\n            setState({ connected: false });\r\n            scheduleReconnect();\r\n        };\r\n\r\n        ws.onerror = () => {\r\n            ws?.close();\r\n        };\r\n    } catch {\r\n        scheduleReconnect();\r\n    }\r\n}\r\n\r\n/** Start the WS connection. Call once at app mount. */\r\nexport function connectLiveWS(): () => void {\r\n    mounted = true;\r\n    connect();\r\n\r\n    return () => {\r\n        mounted = false;\r\n        if (reconnectTimer) clearTimeout(reconnectTimer);\r\n        if (ws) {\r\n            ws.onclose = null; // prevent reconnect on cleanup\r\n            ws.close();\r\n        }\r\n        // Reset to default so next mount starts clean\r\n        state = { ...DEFAULT_STATE };\r\n    };\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Selector Hooks ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\n// Each hook re-renders only when its selected slice changes.\r\n\r\n/**\r\n * Generic selector: subscribe to a computed slice of WS state.\r\n * Uses referential equality ÔÇö careful with object selectors\r\n * (prefer primitive selectors or stable sub-objects).\r\n */\r\nexport function useLiveSelector<T>(selector: (s: WSState) => T): T {\r\n    const selectorRef = useRef(selector);\r\n    selectorRef.current = selector;\r\n\r\n    const snap = useSyncExternalStore(\r\n        subscribe,\r\n        () => selectorRef.current(getSnapshot()),\r\n    );\r\n    return snap;\r\n}\r\n\r\n/** Full WS state ÔÇö use sparingly (re-renders on every tick). */\r\nexport function useLiveAll(): WSState {\r\n    return useSyncExternalStore(subscribe, getSnapshot);\r\n}\r\n\r\n/** Just the live BTC price. */\r\nexport function useLivePrice() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().price);\r\n}\r\n\r\n/** 24h change percent. */\r\nexport function useLiveChangePct() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().change_pct);\r\n}\r\n\r\n/** Connection status (our WS + Binance WS). */\r\nexport function useLiveConnected() {\r\n    const connected = useSyncExternalStore(subscribe, () => getSnapshot().connected);\r\n    const wsConnected = useSyncExternalStore(subscribe, () => getSnapshot().ws_connected);\r\n    return { connected, wsConnected };\r\n}\r\n\r\n/** Bot running status. */\r\nexport function useLiveBotStatus() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().bot_running);\r\n}\r\n\r\n/** Positions array. */\r\nexport function useLivePositions() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().positions);\r\n}\r\n\r\n/** Stats object. */\r\nexport function useLiveStats() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().stats);\r\n}\r\n\r\n/** Prediction data. */\r\nexport function useLivePrediction() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().prediction);\r\n}\r\n\r\n/** Quant analysis data. */\r\nexport function useLiveQuant() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().quant);\r\n}\r\n\r\n/** Accuracy value. */\r\nexport function useLiveAccuracy() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().accuracy);\r\n}\r\n\r\n/** Accuracy source: 'live' or 'training'. */\r\nexport function useLiveAccuracySource() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().accuracy_source);\r\n}\r\n\r\n/** Number of live predictions validated. */\r\nexport function useLiveAccuracySamples() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().live_accuracy_samples);\r\n}\r\n\r\n/** Alt signals. */\r\nexport function useLiveAltSignals() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().alt_signals);\r\n}\r\n\r\n/** 24h high price. */\r\nexport function useLiveHigh24h() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().high_24h);\r\n}\r\n\r\n/** 24h low price. */\r\nexport function useLiveLow24h() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().low_24h);\r\n}\r\n\r\n/** 24h BTC volume. */\r\nexport function useLiveVolumeBtc() {\r\n    return useSyncExternalStore(subscribe, () => getSnapshot().volume_btc);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\stores\\toastStore.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":41,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":41,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Toast ÔÇö Lightweight notification system\r\n * =========================================\r\n * Usage:\r\n *   import { toast } from '../stores/toastStore';\r\n *   toast.success('Trade opened');\r\n *   toast.error('Connection lost');\r\n *\r\n * Render <Toaster /> once at app root.\r\n */\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { IconCheck, IconWarning, IconInfo, IconX } from '../components/Icons';\r\n\r\n// ÔöÇÔöÇÔöÇ Store ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\r\n\r\ntype ToastItem = {\r\n    id: number;\r\n    type: ToastType;\r\n    message: string;\r\n    duration: number;\r\n};\r\n\r\nlet nextId = 0;\r\nconst listeners = new Set<() => void>();\r\nlet items: ToastItem[] = [];\r\n\r\nfunction notify() { listeners.forEach(l => l()); }\r\n\r\nfunction add(type: ToastType, message: string, duration = 4000) {\r\n    const id = nextId++;\r\n    items = [...items, { id, type, message, duration }];\r\n    notify();\r\n}\r\n\r\nfunction remove(id: number) {\r\n    items = items.filter(t => t.id !== id);\r\n    notify();\r\n}\r\n\r\nexport const toast = {\r\n    success: (msg: string, ms?: number) => add('success', msg, ms),\r\n    error: (msg: string, ms?: number) => add('error', msg, ms ?? 6000),\r\n    warning: (msg: string, ms?: number) => add('warning', msg, ms),\r\n    info: (msg: string, ms?: number) => add('info', msg, ms),\r\n};\r\n\r\nfunction useToasts() {\r\n    const [, setTick] = useState(0);\r\n    useEffect(() => {\r\n        const listener = () => setTick(t => t + 1);\r\n        listeners.add(listener);\r\n        return () => { listeners.delete(listener); };\r\n    }, []);\r\n    return items;\r\n}\r\n\r\n// ÔöÇÔöÇÔöÇ Components ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ\r\nconst ICON_MAP = {\r\n    success: <IconCheck size={16} />,\r\n    error: <IconWarning size={16} />,\r\n    warning: <IconWarning size={16} />,\r\n    info: <IconInfo size={16} />,\r\n};\r\n\r\nfunction ToastCard({ item }: { item: ToastItem }) {\r\n    const [exiting, setExiting] = useState(false);\r\n    const timerRef = useRef<ReturnType<typeof setTimeout>>(undefined);\r\n\r\n    const dismiss = useCallback(() => {\r\n        setExiting(true);\r\n        setTimeout(() => remove(item.id), 300);\r\n    }, [item.id]);\r\n\r\n    useEffect(() => {\r\n        timerRef.current = setTimeout(dismiss, item.duration);\r\n        return () => clearTimeout(timerRef.current);\r\n    }, [dismiss, item.duration]);\r\n\r\n    return (\r\n        <div\r\n            className={`toast toast-${item.type} ${exiting ? 'toast-exit' : 'toast-enter'}`}\r\n            role=\"alert\"\r\n            aria-live=\"assertive\"\r\n        >\r\n            <span className=\"toast-icon\">{ICON_MAP[item.type]}</span>\r\n            <span className=\"toast-msg\">{item.message}</span>\r\n            <button className=\"toast-close\" onClick={dismiss} aria-label=\"Dismiss notification\">\r\n                <IconX size={14} />\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function Toaster() {\r\n    const toasts = useToasts();\r\n    if (toasts.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"toast-container\" aria-label=\"Notifications\">\r\n            {toasts.map(t => <ToastCard key={t.id} item={t} />)}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\types\\electron.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Predictor\\desktop\\src\\types\\fontsource.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
